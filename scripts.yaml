# REPLACE the theater scripts in your scripts.yaml with these ripple versions

huskers_theater_game_show_start:
  alias: 'Huskers: Theater Game Show (Start)'
  description: 'Ripple effect theater show - 20 second cycle'
  mode: restart
  sequence:
    # Step 1: Capture current state
    - service: scene.create
      data:
        scene_id: huskers_theater_before_show
        snapshot_entities:
          - light.light_theater_left
          - light.light_theater_right
          - light.spare_light

    # Step 2: Set all lights to cream initially
    - service: light.turn_on
      target:
        entity_id:
          - light.light_theater_left
          - light.light_theater_right
          - light.spare_light
      data:
        rgb_color: [255, 235, 205] # Nebraska Cream
        brightness: 255
        transition: 0

    # Step 3: Set flag and start loop
    - service: input_boolean.turn_on
      target:
        entity_id: input_boolean.huskers_theater_show_running
    - service: script.turn_on
      target:
        entity_id: script.huskers_theater_game_show_loop

huskers_theater_game_show_loop:
  alias: 'Huskers: Theater Game Show (Loop)'
  description: 'Chase effect: Scarlet light chases Left → Right → Spare → Office with fade transitions (20s cycle)'
  mode: restart
  sequence:
    - repeat:
        while:
          - condition: state
            entity_id: input_boolean.huskers_theater_show_running
            state: 'on'
        sequence:
          # Phase 1: Theater Left = Scarlet, others fade to cream
          - service: light.turn_on
            target:
              entity_id: light.light_theater_left
            data:
              rgb_color: [208, 0, 0] # Nebraska Scarlet
              brightness: 255
              transition: 2
          - service: light.turn_on
            target:
              entity_id:
                - light.light_theater_right
                - light.spare_light
                - light.office
            data:
              rgb_color: [255, 235, 205] # Nebraska Cream
              brightness: 255
              transition: 2
          - delay: '00:00:03' # Hold for 3 seconds

          # Phase 2: Theater Right = Scarlet, others fade to cream
          - service: light.turn_on
            target:
              entity_id: light.light_theater_right
            data:
              rgb_color: [208, 0, 0] # Nebraska Scarlet
              brightness: 255
              transition: 2
          - service: light.turn_on
            target:
              entity_id:
                - light.light_theater_left
                - light.spare_light
                - light.office
            data:
              rgb_color: [255, 235, 205] # Nebraska Cream
              brightness: 255
              transition: 2
          - delay: '00:00:03' # Hold for 3 seconds

          # Phase 3: Spare Light = Scarlet, others fade to cream
          - service: light.turn_on
            target:
              entity_id: light.spare_light
            data:
              rgb_color: [208, 0, 0] # Nebraska Scarlet
              brightness: 255
              transition: 2
          - service: light.turn_on
            target:
              entity_id:
                - light.light_theater_left
                - light.light_theater_right
                - light.office
            data:
              rgb_color: [255, 235, 205] # Nebraska Cream
              brightness: 255
              transition: 2
          - delay: '00:00:03' # Hold for 3 seconds

          # Phase 4: Office = Scarlet, others fade to cream
          - service: light.turn_on
            target:
              entity_id: light.office
            data:
              rgb_color: [208, 0, 0] # Nebraska Scarlet
              brightness: 255
              transition: 2
          - service: light.turn_on
            target:
              entity_id:
                - light.light_theater_left
                - light.light_theater_right
                - light.spare_light
            data:
              rgb_color: [255, 235, 205] # Nebraska Cream
              brightness: 255
              transition: 2
          - delay: '00:00:09' # Hold for 9 seconds to complete 20s cycle

huskers_theater_game_show_stop:
  alias: 'Huskers: Theater Game Show (Stop)'
  description: 'Stops ripple show and restores previous state'
  mode: single
  sequence:
    # Stop the loop
    - service: input_boolean.turn_off
      target:
        entity_id: input_boolean.huskers_theater_show_running

    # Restore previous state
    - service: scene.turn_on
      target:
        entity_id: scene.huskers_theater_before_show

    # Log completion
    - service: logbook.log
      data:
        name: Huskers Theater Game Show
        message: 'Theater ripple show stopped, previous lighting restored'
