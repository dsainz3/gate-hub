# scripts.yaml - Theater Game Show Only

huskers_theater_game_show_start:
  alias: 'Huskers: Theater Game Show (Start)'
  description: 'Simple alternating theater show - no transitions, 5s cycles'
  mode: restart
  sequence:
    # Step 1: Capture current state
    - service: scene.create
      data:
        scene_id: huskers_theater_before_show
        snapshot_entities:
          - light.light_theater_left
          - light.light_theater_right

    # Step 2: Set initial positions (Left=Scarlet, Right=Cream)
    - service: light.turn_on
      target:
        entity_id: light.light_theater_left
      data:
        rgb_color: [208, 0, 0] # Nebraska Scarlet
        brightness: 255
        transition: 0
    - service: light.turn_on
      target:
        entity_id: light.light_theater_right
      data:
        rgb_color: [255, 235, 205] # Nebraska Cream
        brightness: 255
        transition: 0

    # Step 3: Set flag and start loop
    - service: input_boolean.turn_on
      target:
        entity_id: input_boolean.huskers_theater_show_running
    - service: script.turn_on
      target:
        entity_id: script.huskers_theater_game_show_loop

huskers_theater_game_show_loop:
  alias: 'Huskers: Theater Game Show (Loop)'
  description: 'Alternates every 5 seconds with no transitions'
  mode: restart
  sequence:
    - repeat:
        while:
          - condition: state
            entity_id: input_boolean.huskers_theater_show_running
            state: 'on'
        sequence:
          # Wait 5 seconds in current state
          - delay: '00:00:05'

          # Swap colors (no transition)
          - service: light.turn_on
            target:
              entity_id:
                - light.light_theater_left
                - light.spare_light
            data:
              rgb_color: [255, 235, 205] # Nebraska Cream
              brightness: 255
              transition: 0
          - service: light.turn_on
            target:
              entity_id: light.light_theater_right
            data:
              rgb_color: [208, 0, 0] # Nebraska Scarlet
              brightness: 255
              transition: 0

          # Wait 5 seconds in swapped state
          - delay: '00:00:05'

          # Swap back (no transition)
          - service: light.turn_on
            target:
              entity_id:
                - light.light_theater_left
                - light.spare_light
            data:
              rgb_color: [208, 0, 0] # Nebraska Scarlet
              brightness: 255
              transition: 0
          - service: light.turn_on
            target:
              entity_id: light.light_theater_right
            data:
              rgb_color: [255, 235, 205] # Nebraska Cream
              brightness: 255
              transition: 0

huskers_theater_game_show_stop:
  alias: 'Huskers: Theater Game Show (Stop)'
  description: 'Stops show and restores previous state'
  mode: single
  sequence:
    # Stop the loop
    - service: input_boolean.turn_off
      target:
        entity_id: input_boolean.huskers_theater_show_running

    # Restore previous state
    - service: scene.turn_on
      target:
        entity_id: scene.huskers_theater_before_show

    # Log completion
    - service: logbook.log
      data:
        name: Huskers Theater Game Show
        message: 'Theater show stopped, previous lighting restored'
