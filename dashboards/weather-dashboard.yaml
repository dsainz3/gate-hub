---
title: Weather Dashboard
views:
  - title: Overview
    path: weather-overview
    icon: mdi:weather-partly-cloudy
    badges: []
    cards:
      - type: grid
        columns: 2
        square: false
        cards:
          - type: weather-forecast
            entity: weather.kneplatt72
          - type: vertical-stack
            cards:
              - type: markdown
                content: >-
                  ### Station Snapshot
                  **Location:** KnePlatt72 personal weather station
                  **Barometer:** {{ states('sensor.outdoor_pressure_wx') }} inHg
                  **Pressure tendency:** {{ states('sensor.wx_pressure_tendency_3h') }}
                  **Alerts:**
                  {% if is_state('binary_sensor.wx_storm_warning_pressure','on') %}
                    Storm warning pressure drop
                  {% elif is_state('binary_sensor.wx_storm_watch_pressure','on') %}
                    Storm watch pressure drop
                  {% else %}
                    No pressure based alerts
                  {% endif %}
              - type: entities
                title: Notification Controls
                show_header_toggle: false
                entities:
                  - entity: input_boolean.weather_notifications_enabled
                    name: Weather notifications
                  - entity: group.weather_dashboard_all
                    name: Weather entity bundle
      - type: grid
        columns: 4
        square: false
        cards:
          - type: tile
            entity: sensor.outdoor_temperature_wx
            name: Temperature
            color: '#ef5350'
            features:
              - type: graph
                graph: line
                detail: 2
          - type: tile
            entity: sensor.outdoor_feels_like
            name: Feels like
            color: '#ef5350'
            features:
              - type: graph
                graph: line
                detail: 2
          - type: tile
            entity: sensor.outdoor_humidity_wx
            name: Humidity
            color: '#3949ab'
            features:
              - type: graph
                graph: line
                detail: 2
          - type: tile
            entity: sensor.outdoor_dew_point_approx
            name: Dew point
            color: '#00897b'
            features:
              - type: graph
                graph: line
                detail: 2
          - type: tile
            entity: sensor.outdoor_wind_speed_wx
            name: Wind speed
            color: '#039be5'
            features:
              - type: graph
                graph: line
                detail: 2
          - type: tile
            entity: sensor.wind_gust
            name: Wind gust
            color: '#0277bd'
            features:
              - type: graph
                graph: line
                detail: 2
          - type: tile
            entity: sensor.kneplatt72_uv_index
            name: UV index
            color: '#f9a825'
            features:
              - type: graph
                graph: line
                detail: 2
          - type: tile
            entity: sensor.outdoor_visibility_wx
            name: Visibility
            color: '#546e7a'
      - type: vertical-stack
        cards:
          - type: statistics-graph
            title: 48 hour trend - core weather
            days_to_show: 2
            chart_type: line
            stat_types:
              - mean
            entities:
              - entity: sensor.outdoor_temperature_wx
                name: Temperature
              - entity: sensor.outdoor_humidity_wx
                name: Humidity
              - entity: sensor.outdoor_wind_speed_wx
                name: Wind speed
          - type: statistics-graph
            title: 48 hour barometer watch
            days_to_show: 2
            chart_type: line
            stat_types:
              - mean
            hide_legend: false
            entities:
              - entity: sensor.outdoor_pressure_wx
                name: Sea-level pressure
              - entity: sensor.wx_pressure_change_3h
                name: Change over 3h
              - entity: sensor.wx_pressure_rate_1h
                name: Rate 1h
      - type: history-graph
        title: Pressure with storm signals (last 24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.outdoor_pressure_wx
            name: Pressure
          - entity: binary_sensor.wx_storm_watch_pressure
            name: Storm watch (pressure)
          - entity: binary_sensor.wx_storm_warning_pressure
            name: Storm warning (pressure)
      - type: grid
        columns: 3
        square: false
        cards:
          - type: tile
            entity: binary_sensor.wx_storm_warning_pressure
            name: Pressure storm warning
            color: '#ef5350'
            state_content:
              - state
              - last_changed
          - type: tile
            entity: binary_sensor.wx_storm_watch_pressure
            name: Pressure storm watch
            color: '#f9a825'
            state_content:
              - state
              - last_changed
          - type: tile
            entity: binary_sensor.wx_pressure_falling_very_fast
            name: Falling very fast
            color: '#d84315'
            state_content:
              - state
              - last_changed
  - title: Barometer & Storms
    path: barometer
    icon: mdi:gauge
    badges: []
    cards:
      - type: markdown
        content: >-
          ### Barometer status
          **Pressure:** {{ states('sensor.outdoor_pressure_wx') }} inHg
          **1h rate:** {{ states('sensor.wx_pressure_rate_1h') }} inHg/h
          **3h change:** {{ states('sensor.wx_pressure_change_3h') }} inHg
          **24h change:** {{ states('sensor.wx_pressure_change_24h') }} inHg
      - type: entities
        title: Derived tendency metrics
        show_header_toggle: false
        entities:
          - entity: sensor.wx_pressure_tendency_3h
            name: 3 hour tendency label
          - entity: sensor.wx_pressure_rate_1h
            name: Rate last hour (inHg/h)
          - entity: sensor.wx_pressure_rate_3h
            name: Rate last 3h (inHg/h)
          - entity: sensor.wx_pressure_change_3h
            name: Change last 3h (inHg)
          - entity: sensor.wx_pressure_change_24h
            name: Change last 24h (inHg)
      - type: vertical-stack
        cards:
          - type: statistics-graph
            title: Pressure trend focus (72h)
            days_to_show: 3
            chart_type: line
            stat_types:
              - mean
            entities:
              - entity: sensor.outdoor_pressure_wx
                name: Sea-level pressure
              - entity: sensor.wx_pressure_rate_1h
                name: Rate 1h
              - entity: sensor.wx_pressure_rate_3h
                name: Rate 3h
          - type: history-graph
            title: Pressure change vs alerts (48h)
            hours_to_show: 48
            entities:
              - entity: sensor.wx_pressure_change_3h
                name: Change 3h
              - entity: sensor.wx_pressure_change_24h
                name: Change 24h
              - entity: binary_sensor.wx_pressure_falling_rapid
                name: Falling rapid alert
              - entity: binary_sensor.wx_pressure_falling_very_fast
                name: Falling very fast alert
      - type: grid
        columns: 2
        square: false
        cards:
          - type: markdown
            content: >-
              #### Response guidance
              * **Warning active:** Prepare to verify official weather statements and secure outdoor items.
              * **Watch active:** Monitor sky conditions, confirm equipment readiness, and keep notifications enabled.
          - type: entities
            title: Quick reference flags
            show_header_toggle: false
            entities:
              - entity: binary_sensor.wx_storm_warning_pressure
                name: Storm warning from pressure drop
              - entity: binary_sensor.wx_storm_watch_pressure
                name: Storm watch from pressure drop
              - entity: binary_sensor.wx_pressure_falling_rapid
                name: Rapid fall (1h)
              - entity: binary_sensor.wx_pressure_falling_very_fast
                name: Very fast fall (1h)
  - title: Details & History
    path: weather-details
    icon: mdi:chart-line
    badges: []
    cards:
      - type: statistics-graph
        title: Temperature, humidity, wind (7 day overview)
        days_to_show: 7
        chart_type: line
        stat_types:
          - mean
          - min
          - max
        entities:
          - entity: sensor.outdoor_temperature_wx
            name: Temperature
          - entity: sensor.outdoor_humidity_wx
            name: Humidity
          - entity: sensor.outdoor_wind_speed_wx
            name: Wind speed
      - type: history-graph
        title: Last 72 hours - extended sensors
        hours_to_show: 72
        entities:
          - entity: sensor.outdoor_dew_point_approx
            name: Dew point
          - entity: sensor.outdoor_feels_like
            name: Feels like
          - entity: sensor.outdoor_visibility_wx
            name: Visibility
          - entity: sensor.uv_category_wx
            name: UV category
      - type: entities
        title: Reference entities
        show_header_toggle: false
        entities:
          - entity: group.weather_dashboard_all
            name: Expand all weather helpers
  # Append these two views to your existing weather dashboard file
  # (e.g., dashboards/weather.yaml or ui-lovelace.yaml)
  # If your dashboard is split into multiple files with !include, add under the correct file.
  # Two new views ready to paste into your Weather dashboard
  # PWS (Live) + OpenWeather (sensors)
  # --- VIEW 1: Personal Weather Station (PWS) ---
  - title: PWS (Live)
    path: weather-pws
    icon: mdi:weather-partly-rainy
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## Personal Weather Station — Live
              Source: PWS sensors at KnePlatt72.
          # Gauges
          - type: horizontal-stack
            cards:
              - type: gauge
                name: Temp (°F)
                entity: sensor.outdoor_temperature_wx
                min: -10
                max: 110
                needle: true
                severity:
                  green: 68
                  yellow: 80
                  red: 92
              - type: gauge
                name: Humidity (%)
                entity: sensor.outdoor_humidity_wx
                min: 0
                max: 100
                needle: true
                severity:
                  green: 30
                  yellow: 60
                  red: 85
              - type: gauge
                name: Wind (mph)
                entity: sensor.outdoor_wind_speed_wx
                min: 0
                max: 40
                needle: true
                severity:
                  green: 0
                  yellow: 15
                  red: 25
          # Details
          - type: entities
            title: PWS Details
            show_header_toggle: false
            entities:
              - entity: sensor.outdoor_dew_point_approx
                name: Dew Point
              - entity: sensor.outdoor_feels_like
                name: Feels Like
              - entity: sensor.wind_gust
                name: Wind Gust
              - entity: sensor.outdoor_pressure_wx
                name: Sea-level Pressure (inHg)
              - entity: sensor.wx_pressure_rate_1h
                name: Pressure Rate 1h (inHg/h)
              - entity: sensor.wx_pressure_change_3h
                name: Pressure Change 3h (inHg)
              - entity: binary_sensor.wx_storm_watch_pressure
                name: Storm Watch (pressure)
              - entity: binary_sensor.wx_storm_warning_pressure
                name: Storm Warning (pressure)
          # 24h charts
          - type: statistics-graph
            title: Temperature & Dew Point — last 24h
            days_to_show: 1
            stat_types:
              - mean
            chart_type: line
            entities:
              - entity: sensor.outdoor_temperature_wx
                name: Temperature
              - entity: sensor.outdoor_dew_point_approx
                name: Dew Point
          - type: statistics-graph
            title: Wind — last 24h
            days_to_show: 1
            stat_types:
              - mean
              - max
            chart_type: line
            entities:
              - entity: sensor.outdoor_wind_speed_wx
                name: Wind Speed
              - entity: sensor.wind_gust
                name: Wind Gust

  # --- VIEW 2: OpenWeather (API sensors) ---
  - title: OpenWeather
    path: weather-openweather
    icon: mdi:weather-cloudy-clock
    cards:
      - type: markdown
        content: |
          ## OpenWeather — One Call / Forecast & Sensors
          Uses your `sensor.openweathermap_*` entities and forecast entity.

      # Forecast card (keep if this points at OpenWeather for you)
      - type: weather-forecast
        entity: weather.kneplatt72
        show_current: true
        show_forecast: true

      # Current conditions from OpenWeather sensors
      - type: entities
        title: OpenWeather — Now
        show_header_toggle: false
        entities:
          - entity: sensor.openweathermap_temperature
            name: Temperature
          - entity: sensor.openweathermap_feels_like_temperature
            name: Feels Like
          - entity: sensor.openweathermap_humidity
            name: Humidity
          - entity: sensor.openweathermap_dew_point
            name: Dew Point
          - entity: sensor.openweathermap_pressure
            name: Pressure
          - entity: sensor.openweathermap_cloud_coverage
            name: Cloud Cover
          - entity: sensor.openweathermap_uv_index
            name: UV Index
          - entity: sensor.openweathermap_visibility
            name: Visibility
          - entity: sensor.openweathermap_wind_speed
            name: Wind Speed
          - entity: sensor.openweathermap_wind_gust
            name: Wind Gust
          - entity: sensor.openweathermap_wind_bearing
            name: Wind Direction
          - entity: sensor.openweathermap_rain
            name: Precipitation (1h)

      # Trend charts (24h)
      - type: statistics-graph
        title: OpenWeather — Temperature last 24h
        days_to_show: 1
        stat_types:
          - mean
        chart_type: line
        entities:
          - entity: sensor.openweathermap_temperature
            name: Temperature
          - entity: sensor.openweathermap_feels_like_temperature
            name: Feels Like

      - type: statistics-graph
        title: OpenWeather — Wind last 24h
        days_to_show: 1
        stat_types:
          - mean
          - max
        chart_type: line
        entities:
          - entity: sensor.openweathermap_wind_speed
            name: Wind Speed
          - entity: sensor.openweathermap_wind_gust
            name: Wind Gust

      - type: statistics-graph
        title: OpenWeather — Humidity/Clouds last 24h
        days_to_show: 1
        stat_types:
          - mean
        chart_type: line
        entities:
          - entity: sensor.openweathermap_humidity
            name: Humidity
          - entity: sensor.openweathermap_cloud_coverage
            name: Cloud Cover