title: Weather Dashboard
views:
  # =======================
  # 1) OVERVIEW (everyday)
  # =======================
  - title: Overview
    path: weather-overview
    icon: mdi:weather-partly-cloudy
    badges: []
    cards:
      - type: weather-forecast
        entity: weather.kneplatt72

      - type: glance
        title: Now
        show_name: true
        show_state: true
        entities:
          - entity: sensor.outdoor_temperature_wx
            name: Temp
          - entity: sensor.outdoor_feels_like
            name: Feels Like
          - entity: sensor.outdoor_dew_point_approx
            name: Dew Point
          - entity: sensor.outdoor_humidity_wx
            name: Humidity
          - entity: sensor.outdoor_wind_speed_wx
            name: Wind
          - entity: sensor.wind_gust
            name: Gust
          - entity: sensor.kneplatt72_uv_index
            name: UV
          - entity: sensor.uv_category_wx
            name: UV Cat
          - entity: sensor.outdoor_pressure_wx
            name: Pressure
          - entity: sensor.outdoor_visibility_wx
            name: Visibility

      - type: entities
        title: Controls
        show_header_toggle: false
        entities:
          - entity: input_boolean.weather_notifications_enabled
            name: Weather Notifications
          - entity: group.weather_dashboard_all
            name: All Weather Entities

      - type: horizontal-stack
        cards:
          - type: sensor
            entity: sensor.outdoor_temperature_wx
            name: Temperature
            graph: line
          - type: sensor
            entity: sensor.outdoor_humidity_wx
            name: Humidity
            graph: line
          - type: sensor
            entity: sensor.outdoor_wind_speed_wx
            name: Wind

      - type: horizontal-stack
        cards:
          - type: gauge
            entity: sensor.outdoor_temperature_wx
            name: Temp
            min: -20
            max: 120
          - type: gauge
            entity: sensor.outdoor_humidity_wx
            name: Humidity
            min: 0
            max: 100
          - type: gauge
            entity: sensor.kneplatt72_uv_index
            name: UV
            min: 0
            max: 11

  # ============================
  # 2) BAROMETER & STORM SIGNALS
  # ============================
  - title: Barometer & Storms
    path: barometer
    icon: mdi:gauge
    badges: []
    cards:
      - type: entities
        title: Barometer & Tendency
        show_header_toggle: false
        entities:
          - entity: sensor.outdoor_pressure_wx
            name: Sea-level pressure
          - entity: sensor.wx_pressure_tendency_3h
            name: 3-hour tendency
          - entity: sensor.wx_pressure_change_3h
            name: Change (3h, inHg)
          - entity: sensor.wx_pressure_rate_1h
            name: Rate (1h, inHg/h)
          - entity: sensor.wx_pressure_rate_3h
            name: Rate (3h, inHg/h)

      - type: horizontal-stack
        cards:
          - type: sensor
            entity: sensor.outdoor_pressure_wx
            name: Pressure
            graph: line
          - type: sensor
            entity: sensor.wx_pressure_rate_1h
            name: Rate 1h
            graph: line
          - type: sensor
            entity: sensor.wx_pressure_change_3h
            name: Δ 3h
            graph: line

      - type: history-graph
        title: Pressure – Last 24 hours
        hours_to_show: 24
        entities:
          - entity: sensor.outdoor_pressure_wx
          - entity: sensor.wx_pressure_change_3h
          - entity: sensor.wx_pressure_rate_1h

      - type: entities
        title: Storm Heuristics (pressure-only)
        show_header_toggle: false
        entities:
          - entity: binary_sensor.wx_pressure_falling_rapid
            name: Falling rapidly (≥0.06 inHg/h)
          - entity: binary_sensor.wx_pressure_falling_very_fast
            name: Falling very fast (≥0.09 inHg/h)
          - entity: binary_sensor.wx_storm_watch_pressure
            name: Storm Watch (≥0.06 inHg/3h)
          - entity: binary_sensor.wx_storm_warning_pressure
            name: Storm Warning (≥0.09 inHg/3h)

      - type: conditional
        conditions:
          - entity: binary_sensor.wx_storm_warning_pressure
            state: 'on'
        card:
          type: markdown
          content: |
            ## ⚠️ **Storm Warning (pressure)**
            Rapid pressure fall (≥ 0.09 inHg in the last 3 hours).
            Check official alerts & radar.

      - type: conditional
        conditions:
          - entity: binary_sensor.wx_storm_watch_pressure
            state: 'on'
          - entity: binary_sensor.wx_storm_warning_pressure
            state: 'off'
        card:
          type: markdown
          content: |
            ### ⚠️ Storm Watch (pressure)
            Rapid pressure fall (≥ 0.06 inHg in the last 3 hours).

  # =====================
  # 3) DETAILS & HISTORY
  # =====================
  - title: Details & History
    path: weather-details
    icon: mdi:chart-line
    badges: []
    cards:
      - type: history-graph
        title: Last 24 hours (core)
        hours_to_show: 24
        entities:
          - entity: sensor.outdoor_temperature_wx
          - entity: sensor.outdoor_humidity_wx
          - entity: sensor.outdoor_wind_speed_wx
          - entity: sensor.outdoor_pressure_wx
          - entity: sensor.kneplatt72_uv_index

      - type: statistics-graph
        title: 24h Trends (mean/min/max)
        days_to_show: 1
        stat_types:
          - mean
          - min
          - max
        chart_type: line
        entities:
          - entity: sensor.outdoor_temperature_wx
          - entity: sensor.outdoor_humidity_wx
          - entity: sensor.outdoor_wind_speed_wx

      - type: entities
        title: All Weather Entities
        show_header_toggle: false
        entities:
          - entity: group.weather_dashboard_all
            name: Open group
