# dashboards/huskers-free.yaml
title: Memorial Stadium Command Center
views:
  - title: Super Fan Dashboard
    path: huskers-main
    icon: mdi:football-helmet
    cards:
      # Quick Refresh Controls
      - type: entities
        title: üîÑ Data Refresh Controls
        show_header_toggle: false
        entities:
          - type: button
            name: Refresh All Data
            icon: mdi:refresh-circle
            action_name: Update All
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              data: {}
              target:
                entity_id:
                  - sensor.cfb_scoreboard_espn
                  - sensor.nebraska_schedule_espn
                  - sensor.nebraska_team_info_espn
                  - sensor.big_ten_teams_espn
                  - sensor.cfb_rankings_espn

      # ===============================
      # PREGAME VIEW
      # ===============================
      - type: conditional
        conditions:
          - entity: binary_sensor.huskers_is_pregame_free
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: markdown
              content: |
                # üèà PREGAME - GO BIG RED!

            # Game Info Card
            - type: entities
              title: üéØ Next Game Information
              show_header_toggle: false
              entities:
                - entity: sensor.huskers_next_game_free
                  name: Matchup
                  icon: mdi:football
                - entity: sensor.huskers_next_game_free
                  type: attribute
                  attribute: kickoff_time
                  name: Kickoff Time
                  icon: mdi:clock-outline
                - entity: sensor.huskers_next_game_free
                  type: attribute
                  attribute: home_away
                  name: Home/Away
                  icon: mdi:home-variant

            # Season Overview
            - type: horizontal-stack
              cards:
                - type: entity
                  entity: sensor.huskers_record_free
                  name: Overall Record
                  icon: mdi:trophy
                - type: entity
                  entity: sensor.huskers_rankings_free
                  name: AP Ranking
                  icon: mdi:podium-gold

            # Light Controls
            - type: horizontal-stack
              cards:
                - type: button
                  name: START 30s Chase
                  icon: mdi:play-speed
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.huskers_chase30_start
                - type: button
                  name: Hail Burst
                  icon: mdi:music-note
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.huskers_hail_burst_8s
                - type: button
                  name: All Scarlet
                  icon: mdi:palette
                  tap_action:
                    action: call-service
                    service: scene.turn_on
                    target:
                      entity_id: scene.huskers_seven_all_scarlet

      # ===============================
      # LIVE GAME VIEW
      # ===============================
      - type: conditional
        conditions:
          - entity: binary_sensor.huskers_is_live_free
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: markdown
              content: |
                # üî¥ LIVE GAME - GO BIG RED!

            # Live Scoreboard
            - type: entities
              title: üèÜ Live Scoreboard
              show_header_toggle: false
              entities:
                - entity: sensor.huskers_game_status_free
                  name: Game Status
                  icon: mdi:football
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: home_team
                  name: Home Team
                  icon: mdi:home
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: home_score
                  name: Home Score
                  icon: mdi:scoreboard
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: away_team
                  name: Away Team
                  icon: mdi:airplane-takeoff
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: away_score
                  name: Away Score
                  icon: mdi:scoreboard-outline
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: quarter
                  name: Quarter
                  icon: mdi:clock
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: clock
                  name: Game Clock
                  icon: mdi:timer

            # Celebration Controls
            - type: horizontal-stack
              cards:
                - type: button
                  name: üéâ TOUCHDOWN!
                  icon: mdi:football
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.huskers_hail_burst_8s
                - type: button
                  name: Chase Lights
                  icon: mdi:play-circle
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.huskers_chase_speed_start
                - type: button
                  name: STOP
                  icon: mdi:stop-circle
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id:
                        - script.huskers_chase30_stop
                        - script.huskers_chase_speed_stop

            # Light Activity Graph
            - type: history-graph
              title: üé® Light Show Activity
              hours_to_show: 2
              entities:
                - entity: light.light_theater_left
                - entity: light.light_theater_right
                - entity: light.light_front_left
                - entity: light.light_front_right

      # ===============================
      # POSTGAME VIEW
      # ===============================
      - type: conditional
        conditions:
          - entity: binary_sensor.huskers_is_postgame_free
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: markdown
              content: |
                # ‚úÖ FINAL SCORE

            # Final Score
            - type: entities
              title: üèÅ Game Result
              show_header_toggle: false
              entities:
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: home_team
                  name: Home Team
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: home_score
                  name: Home Score
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: away_team
                  name: Away Team
                - entity: sensor.huskers_game_status_free
                  type: attribute
                  attribute: away_score
                  name: Away Score

            # Post-game celebration button
            - type: button
              name: üéä Victory Celebration
              icon: mdi:trophy
              tap_action:
                action: call-service
                service: script.turn_on
                target:
                  entity_id: script.huskers_hail_burst_8s

      # ===============================
      # ALWAYS VISIBLE SECTIONS
      # ===============================

      # Season Overview (always visible)
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## üìà Season Performance

          - type: horizontal-stack
            cards:
              - type: gauge
                entity: sensor.huskers_record_free
                name: Win Percentage
                needle: true
                min: 0
                max: 1
                attribute: percentage
              - type: entity
                entity: sensor.huskers_rankings_free
                name: AP Ranking
                icon: mdi:podium-gold

          # Record Details
          - type: entities
            title: üìä Season Record
            show_header_toggle: false
            entities:
              - entity: sensor.huskers_record_free
                name: Overall Record
                icon: mdi:trophy
              - entity: sensor.huskers_record_free
                type: attribute
                attribute: wins
                name: Wins
                icon: mdi:check-circle
              - entity: sensor.huskers_record_free
                type: attribute
                attribute: losses
                name: Losses
                icon: mdi:close-circle
              - entity: sensor.huskers_record_free
                type: attribute
                attribute: percentage
                name: Win Percentage
                icon: mdi:percent

      # Big Ten Standings
      - type: markdown
        title: üèÜ Big Ten Standings
        content: |
          {{ states('sensor.big_ten_standings_free') }}

      # Complete Schedule
      - type: markdown
        title: üìÖ Complete Schedule
        content: |
          {{ states('sensor.huskers_schedule_free') }}

      # Light Controls (always available)
      - type: entities
        title: üí° Light Show Controls
        show_header_toggle: false
        entities:
          - entity: input_boolean.huskers_effects_enabled
            name: Effects Enabled
          - entity: input_boolean.huskers_reverse_direction
            name: Reverse Direction
          - entity: input_number.huskers_global_brightness
            name: Brightness
          - entity: input_number.huskers_chase_cycle_seconds
            name: Chase Cycle Length (s)
          - entity: input_number.huskers_hail_bpm
            name: Hail Varsity Tempo (BPM)

      # All Lights Status
      - type: grid
        square: false
        columns: 4
        cards:
          - type: light
            entity: light.light_theater_left
            name: Theater Left
          - type: light
            entity: light.light_theater_right
            name: Theater Right
          - type: light
            entity: light.light_front_left
            name: Front Left
          - type: light
            entity: light.light_front_right
            name: Front Right
          - type: light
            entity: light.light_garage_left
            name: Garage Left
          - type: light
            entity: light.lights_garage_center
            name: Garage Center
          - type: light
            entity: light.light_garage_right
            name: Garage Right
          - type: light
            entity: light.spare_light
            name: Spare Light

      # Debug Information
      - type: entities
        title: üîß Debug & Status
        show_header_toggle: false
        entities:
          - entity: sensor.cfb_scoreboard_espn
            name: Scoreboard Data Status
            icon: mdi:scoreboard
          - entity: sensor.nebraska_schedule_espn
            name: Schedule Data Status
            icon: mdi:calendar
          - entity: sensor.nebraska_team_info_espn
            name: Team Info Status
            icon: mdi:information
          - entity: sensor.cfb_rankings_espn
            name: Rankings Data Status
            icon: mdi:podium-gold
          - entity: binary_sensor.huskers_is_pregame_free
            name: Is Pregame
          - entity: binary_sensor.huskers_is_live_free
            name: Is Live Game
          - entity: binary_sensor.huskers_is_postgame_free
            name: Is Postgame

  # ===============================
  # SCHEDULE & STANDINGS VIEW
  # ===============================
  - title: Schedule & Standings
    path: huskers-schedule
    icon: mdi:calendar-month
    cards:
      - type: markdown
        content: |
          # üìÖ Schedule & Conference Standings

      # Current Season Record
      - type: horizontal-stack
        cards:
          - type: entity
            entity: sensor.huskers_record_free
            name: Season Record
            icon: mdi:trophy
          - type: entity
            entity: sensor.huskers_rankings_free
            name: AP Ranking
            icon: mdi:podium-gold

      # Next Game Highlight
      - type: entities
        title: üéØ Next Game
        show_header_toggle: false
        entities:
          - entity: sensor.huskers_next_game_free
            name: Next Matchup
            icon: mdi:football
          - entity: sensor.huskers_next_game_free
            type: attribute
            attribute: opponent
            name: Opponent
            icon: mdi:account-group
          - entity: sensor.huskers_next_game_free
            type: attribute
            attribute: kickoff_time
            name: Kickoff Time
            icon: mdi:clock-outline
          - entity: sensor.huskers_next_game_free
            type: attribute
            attribute: home_away
            name: Location
            icon: mdi:map-marker

      # Full Schedule
      - type: markdown
        title: üìã Complete 2025 Schedule
        content: |
          {{ states('sensor.huskers_schedule_free') }}

      # Conference Standings
      - type: markdown
        title: üèÜ Big Ten Conference
        content: |
          {{ states('sensor.big_ten_standings_free') }}

      # Quick Actions
      - type: horizontal-stack
        cards:
          - type: button
            name: Refresh Schedule
            icon: mdi:calendar-refresh
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.nebraska_schedule_espn
          - type: button
            name: Refresh Standings
            icon: mdi:trophy-award
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.big_ten_teams_espn
          - type: button
            name: Refresh Rankings
            icon: mdi:podium
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.cfb_rankings_espn

  # ===============================
  # LIGHT SHOW CONTROL
  # ===============================
  - title: Light Show Control
    path: huskers-lights
    icon: mdi:lightbulb-group
    cards:
      - type: markdown
        content: |
          # üí° Huskers Light Show Control

      # Automation Status
      - type: entities
        title: ü§ñ Automation Status
        show_header_toggle: false
        entities:
          - entity: input_boolean.huskers_automations_enabled
            name: Automations Enabled
            icon: mdi:auto-fix
          - entity: input_boolean.huskers_effects_enabled
            name: Effects Enabled
            icon: mdi:lightbulb-group
          - entity: input_boolean.huskers_game_mode
            name: Game Mode Active
            icon: mdi:football
          - entity: input_boolean.huskers_test_mode
            name: Test Mode
            icon: mdi:test-tube

      # Light Effect Settings
      - type: entities
        title: ‚öôÔ∏è Light Configuration
        show_header_toggle: false
        entities:
          - entity: input_boolean.huskers_reverse_direction
            name: Reverse Direction
            icon: mdi:swap-horizontal
          - entity: input_number.huskers_global_brightness
            name: Global Brightness
          - entity: input_number.huskers_chase_cycle_seconds
            name: Chase Cycle Duration
          - entity: input_number.huskers_hail_bpm
            name: Hail Varsity BPM
          - entity: input_number.huskers_celebration_intensity
            name: Celebration Intensity

      # Manual Controls
      - type: entities
        title: üéÆ Manual Controls
        show_header_toggle: false
        entities:
          - type: button
            name: Start 30s Chase
            icon: mdi:play-speed
            action_name: Start
            tap_action:
              action: call-service
              service: script.turn_on
              target:
                entity_id: script.huskers_chase30_start
          - type: button
            name: Start Variable Chase
            icon: mdi:play-circle
            action_name: Start
            tap_action:
              action: call-service
              service: script.turn_on
              target:
                entity_id: script.huskers_chase_speed_start
          - type: button
            name: Hail Varsity Burst
            icon: mdi:music-note
            action_name: Play
            tap_action:
              action: call-service
              service: script.turn_on
              target:
                entity_id: script.huskers_hail_burst_8s
          - type: button
            name: Step Once
            icon: mdi:skip-forward
            action_name: Step
            tap_action:
              action: call-service
              service: script.turn_on
              target:
                entity_id: script.huskers_chase_step_once
          - type: button
            name: All Scarlet Scene
            icon: mdi:palette
            action_name: Activate
            tap_action:
              action: call-service
              service: scene.turn_on
              target:
                entity_id: scene.huskers_seven_all_scarlet
          - type: button
            name: Stop All & Restore
            icon: mdi:stop-circle
            action_name: Stop
            tap_action:
              action: call-service
              service: script.turn_on
              target:
                entity_id:
                  - script.huskers_chase30_stop
                  - script.huskers_chase_speed_stop

      # Individual Light Controls
      - type: grid
        square: false
        columns: 4
        cards:
          - type: light
            entity: light.light_theater_left
            name: Theater Left
          - type: light
            entity: light.light_theater_right
            name: Theater Right
          - type: light
            entity: light.light_front_left
            name: Front Left
          - type: light
            entity: light.light_front_right
            name: Front Right
          - type: light
            entity: light.light_garage_left
            name: Garage Left
          - type: light
            entity: light.lights_garage_center
            name: Garage Center
          - type: light
            entity: light.light_garage_right
            name: Garage Right
          - type: light
            entity: light.spare_light
            name: Spare Light

      # Script Status
      - type: entities
        title: üìä Script Status
        show_header_toggle: false
        entities:
          - entity: script.huskers_chase30_start
            name: 30s Chase (Start)
            secondary_info: last-changed
          - entity: script.huskers_chase30_loop
            name: 30s Chase (Loop)
            secondary_info: last-changed
          - entity: script.huskers_chase_speed_start
            name: Variable Chase (Start)
            secondary_info: last-changed
          - entity: script.huskers_chase_speed_loop
            name: Variable Chase (Loop)
            secondary_info: last-changed
          - entity: script.huskers_hail_burst_8s
            name: Hail Burst
            secondary_info: last-changed
          - entity: scene.huskers_seven_all_scarlet
            name: All Scarlet Scene
            secondary_info: last-changed

      # Light Activity History
      - type: history-graph
        title: üí° Light Activity (Last 4 Hours)
        hours_to_show: 4
        entities:
          - entity: light.light_theater_left
          - entity: light.light_theater_right
          - entity: light.light_front_left
          - entity: light.light_front_right
          - entity: light.light_garage_left
          - entity: light.lights_garage_center
          - entity: light.light_garage_right
          - entity: light.spare_light

  # ===============================
  # SYSTEM STATUS
  # ===============================
  - title: System Status
    path: huskers-system
    icon: mdi:cog
    cards:
      - type: markdown
        content: |
          # üîß System Status & Configuration

      # API Status
      - type: entities
        title: üì° Data Source Status
        show_header_toggle: false
        entities:
          - entity: sensor.cfb_scoreboard_espn
            name: ESPN Scoreboard API
            icon: mdi:scoreboard
          - entity: sensor.nebraska_schedule_espn
            name: Nebraska Schedule API
            icon: mdi:calendar
          - entity: sensor.nebraska_team_info_espn
            name: Team Information API
            icon: mdi:information
          - entity: sensor.big_ten_teams_espn
            name: Big Ten Teams API
            icon: mdi:account-group
          - entity: sensor.cfb_rankings_espn
            name: College Football Rankings API
            icon: mdi:podium-gold

      # Game Phase Status
      - type: entities
        title: üèà Game Phase Detection
        show_header_toggle: false
        entities:
          - entity: binary_sensor.huskers_is_pregame_free
            name: Is Pregame
            icon: mdi:clock-start
          - entity: binary_sensor.huskers_is_live_free
            name: Is Live Game
            icon: mdi:play-circle
          - entity: binary_sensor.huskers_is_postgame_free
            name: Is Postgame
            icon: mdi:clock-end

      # Data Refresh Controls
      - type: entities
        title: üîÑ Manual Data Refresh
        show_header_toggle: false
        entities:
          - type: button
            name: Refresh Live Scores
            icon: mdi:scoreboard-outline
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.cfb_scoreboard_espn
          - type: button
            name: Refresh Schedule
            icon: mdi:calendar-refresh
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.nebraska_schedule_espn
          - type: button
            name: Refresh Team Info
            icon: mdi:information-outline
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.nebraska_team_info_espn
          - type: button
            name: Refresh Big Ten Data
            icon: mdi:account-group-outline
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.big_ten_teams_espn
          - type: button
            name: Refresh Rankings
            icon: mdi:podium-outline
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id: sensor.cfb_rankings_espn
          - type: button
            name: Refresh All Data
            icon: mdi:refresh
            tap_action:
              action: call-service
              service: homeassistant.update_entity
              target:
                entity_id:
                  - sensor.cfb_scoreboard_espn
                  - sensor.nebraska_schedule_espn
                  - sensor.nebraska_team_info_espn
                  - sensor.big_ten_teams_espn
                  - sensor.cfb_rankings_espn

      # System Information
      - type: markdown
        content: |
          ## üìã System Information

          **Data Source**: ESPN Hidden API (Free)
          **Update Frequency**:
          - Live Scores: Every 5 minutes during games
          - Schedule: Every 30 minutes
          - Rankings: Every 60 minutes
          - Team Info: Every 60 minutes

          **Features Available**:
          ‚úÖ Live game scores and status
          ‚úÖ Complete Nebraska schedule
          ‚úÖ Season record tracking
          ‚úÖ AP Poll rankings
          ‚úÖ Big Ten standings
          ‚úÖ Game phase detection
          ‚úÖ Automated light shows

          **ESPN Team ID**: 158 (Nebraska Cornhuskers)
          **Big Ten Conference ID**: 4
