# dashboards/huskers-free.yaml
title: Memorial Stadium Command Center
views:
  - title: Super Fan Dashboard
    path: huskers-main
    icon: mdi:football-helmet
    cards:
      # Quick Refresh Controls
      - type: entities
        title: 'üîÑ Data Refresh Controls'
        show_header_toggle: false
        entities:
          - type: call-service
            name: Refresh All Data
            icon: mdi:refresh-circle
            action_name: Update All
            service: homeassistant.update_entity
            data: {}
            target:
              entity_id:
                - sensor.huskers_team_name
                - sensor.huskers_opponent_name_2
                - sensor.huskers_team_score
                - sensor.huskers_opponent_score_2

      # ===============================
      # PREGAME VIEW
      # ===============================
      - type: conditional
        conditions:
          - condition: state
            entity: binary_sensor.huskers_pregame_window
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: markdown
              content: |
                # üèà PREGAME - GO BIG RED!

            # Game Info Card
            - type: entities
              title: 'üéØ Next Game Information'
              show_header_toggle: false
              entities:
                - entity: sensor.huskers_opponent_name_2
                  name: Opponent
                  icon: mdi:football
                - entity: sensor.huskers_kickoff_time_ct_2
                  name: Kickoff Time
                  icon: mdi:clock-outline
                - entity: sensor.huskers_venue
                  name: Venue
                  icon: mdi:home-variant

            # Light Controls
            - type: horizontal-stack
              cards:
                - type: button
                  name: START 30s Chase
                  icon: mdi:play-speed
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.huskers_chase30_start
                - type: button
                  name: Hail Burst
                  icon: mdi:music-note
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.huskers_hail_burst_8s
                - type: button
                  name: All Scarlet
                  icon: mdi:palette
                  tap_action:
                    action: call-service
                    service: scene.turn_on
                    target:
                      entity_id: scene.huskers_seven_all_scarlet_base

      # ===============================
      # LIVE GAME VIEW
      # ===============================
      - type: conditional
        conditions:
          - condition: state
            entity: binary_sensor.huskers_game_in_progress_tt
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: markdown
              content: |
                # üî¥ LIVE GAME - GO BIG RED!

            # Live Scoreboard
            - type: entities
              title: 'üèÜ Live Scoreboard'
              show_header_toggle: false
              entities:
                - entity: sensor.huskers_game_clock_ct_2
                  name: Game Status
                  icon: mdi:football
                - entity: sensor.huskers_team_name
                  name: Nebraska
                  icon: mdi:home
                - entity: sensor.huskers_team_score
                  name: Nebraska Score
                  icon: mdi:scoreboard
                - entity: sensor.huskers_opponent_name_2
                  name: Opponent
                  icon: mdi:airplane-takeoff
                - entity: sensor.huskers_opponent_score_2
                  name: Opponent Score
                  icon: mdi:scoreboard-outline
                - entity: sensor.huskers_quarter
                  name: Quarter
                  icon: mdi:clock

            # Celebration Controls
            - type: horizontal-stack
              cards:
                - type: button
                  name: 'üéâ TOUCHDOWN!'
                  icon: mdi:football
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.huskers_hail_burst_8s
                - type: button
                  name: Chase Lights
                  icon: mdi:play-circle
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.huskers_chase_speed_start
                - type: button
                  name: STOP All Shows
                  icon: mdi:stop-circle
                  tap_action:
                    action: call-service
                    service: script.turn_on
                    target:
                      entity_id: script.kiosk_stop_all_huskers_shows

            # Light Activity Graph
            - type: history-graph
              title: 'üé® Light Show Activity'
              hours_to_show: 2
              entities:
                - entity: light.theater_lights
                - entity: light.front_porch_lights
                - entity: light.all_exterior_lights

      # ===============================
      # POSTGAME VIEW
      # ===============================
      - type: conditional
        conditions:
          - condition: state
            entity: binary_sensor.huskers_postgame_window
            state: 'on'
        card:
          type: vertical-stack
          cards:
            - type: markdown
              content: |
                # ‚úÖ FINAL SCORE

            # Final Score
            - type: entities
              title: 'üèÅ Game Result'
              show_header_toggle: false
              entities:
                - entity: sensor.huskers_team_name
                  name: Nebraska
                - entity: sensor.huskers_team_score
                  name: Nebraska Score
                - entity: sensor.huskers_opponent_name_2
                  name: Opponent
                - entity: sensor.huskers_opponent_score_2
                  name: Opponent Score
                - entity: sensor.huskers_game_clock_ct_2
                  name: Final Status

            # Post-game celebration button
            - type: button
              name: 'üéä Victory Celebration'
              icon: mdi:trophy
              tap_action:
                action: call-service
                service: script.turn_on
                target:
                  entity_id: script.huskers_hail_burst_8s

      # ===============================
      # ALWAYS VISIBLE SECTIONS
      # ===============================
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## üèà Current Game Status
          - type: entities
            title: 'üìä Live Game Info'
            show_header_toggle: false
            entities:
              - entity: sensor.huskers_team_name
                name: Team
                icon: mdi:football-helmet
              - entity: sensor.huskers_opponent_name_2
                name: Opponent
                icon: mdi:account-group
              - entity: sensor.huskers_team_score
                name: Nebraska Score
                icon: mdi:scoreboard
              - entity: sensor.huskers_opponent_score_2
                name: Opponent Score
                icon: mdi:scoreboard-outline
              - entity: sensor.huskers_quarter
                name: Quarter/Period
                icon: mdi:clock
              - entity: sensor.huskers_game_clock_ct_2
                name: Game Clock
                icon: mdi:timer

      # Schedule Information (kept inside this view)
      - type: markdown
        title: 'üìÖ Complete Schedule'
        content: |
          {{ states('sensor.huskers_schedule_combined') }}

      # ESPN Live Game Data (if available)
      - type: conditional
        conditions:
          - condition: template
            value_template: "{{ states('sensor.huskers_game_status_espn') != 'No game today' }}"
        card:
          type: entities
          title: 'üèà ESPN Live Game Data'
          entities:
            - entity: sensor.huskers_game_status_espn
              name: Game Status
            - entity: sensor.huskers_game_status_espn
              type: attribute
              attribute: home_team
              name: Home Team
            - entity: sensor.huskers_game_status_espn
              type: attribute
              attribute: away_team
              name: Away Team

      # Manual Score Controls
      - type: entities
        title: 'üéÆ Manual Score Control (Testing)'
        show_header_toggle: false
        entities:
          - entity: input_number.huskers_our_score
            name: Our Score (Auto)
          - entity: input_number.huskers_our_score_manual
            name: Our Score (Manual)
          - entity: input_number.huskers_kickoff_in_manual
            name: Kickoff In (Manual)

      # Light Show Controls
      - type: entities
        title: 'üí° Light Show Controls'
        show_header_toggle: false
        entities:
          - entity: input_boolean.huskers_automations_enabled
            name: Automations Enabled
          - entity: input_boolean.huskers_color_show
            name: Color Show Active
          - entity: input_boolean.huskers_theater_show_running
            name: Theater Show Running
          - entity: input_number.huskers_hail_varsity_bpm
            name: Hail Varsity BPM
          - entity: input_number.huskers_chase_cycle_seconds
            name: Chase Cycle (seconds)
          - entity: input_number.huskers_hail_bpm
            name: Hail BPM

      # Manual Light Controls
      - type: entities
        title: 'üé≠ Manual Light Controls'
        show_header_toggle: false
        entities:
          - type: call-service
            name: Start 30s Chase
            icon: mdi:play-speed
            action_name: Start
            service: script.turn_on
            target:
              entity_id: script.huskers_chase30_start
          - type: call-service
            name: Start Variable Chase
            icon: mdi:play-circle
            action_name: Start
            service: script.turn_on
            target:
              entity_id: script.huskers_chase_speed_start
          - type: call-service
            name: Hail Varsity Burst
            icon: mdi:music-note
            action_name: Play
            service: script.turn_on
            target:
              entity_id: script.huskers_hail_burst_8s
          - type: call-service
            name: All Scarlet Scene
            icon: mdi:palette
            action_name: Activate
            service: scene.turn_on
            target:
              entity_id: scene.huskers_seven_all_scarlet_base
          - type: call-service
            name: Stop All Shows
            icon: mdi:stop-circle
            action_name: Stop
            service: script.turn_on
            target:
              entity_id: script.kiosk_stop_all_huskers_shows

      # Light Status Grid
      - type: grid
        square: false
        columns: 3
        cards:
          - type: light
            entity: light.theater_lights
            name: Theater Lights
          - type: light
            entity: light.front_porch_lights
            name: Front Porch
          - type: light
            entity: light.all_exterior_lights
            name: All Exterior
          - type: light
            entity: light.office_lights
            name: Office Lights
          - type: light
            entity: light.mainfloor_lights
            name: Main Floor
          - type: light
            entity: light.all_lights
            name: All Lights

      # Game Phase Status
      - type: entities
        title: 'üîß Game Phase & Status'
        show_header_toggle: false
        entities:
          - entity: binary_sensor.huskers_pregame_window
            name: Pregame Window
          - entity: binary_sensor.huskers_game_in_progress_tt
            name: Game In Progress
          - entity: binary_sensor.huskers_postgame_window
            name: Postgame Window
          - entity: sensor.huskers_kickoff_in_2
            name: Kickoff In (minutes)

  # ===============================
  # LIGHT SHOW CONTROL VIEW
  # ===============================
  - title: Light Show Control
    path: huskers-lights
    icon: mdi:lightbulb-group
    cards:
      - type: markdown
        content: |
          # üí° Huskers Light Show Control

      # Automation Status
      - type: entities
        title: 'ü§ñ Automation Status'
        show_header_toggle: false
        entities:
          - entity: input_boolean.huskers_automations_enabled
            name: Automations Enabled
            icon: mdi:auto-fix
          - entity: input_boolean.huskers_color_show
            name: Color Show Active
            icon: mdi:lightbulb-group
          - entity: input_boolean.huskers_theater_show_running
            name: Theater Show Running
            icon: mdi:theater

      # Light Effect Settings
      - type: entities
        title: '‚öôÔ∏è Light Configuration'
        show_header_toggle: false
        entities:
          - entity: input_number.huskers_hail_varsity_bpm
            name: Hail Varsity BPM
          - entity: input_number.huskers_chase_cycle_seconds
            name: Chase Cycle Duration
          - entity: input_number.huskers_hail_bpm
            name: Hail BPM

      # Available Script Controls
      - type: entities
        title: 'üéÆ Available Script Controls'
        show_header_toggle: false
        entities:
          - type: call-service
            name: Start 30s Chase
            icon: mdi:play-speed
            action_name: Start
            service: script.turn_on
            target:
              entity_id: script.huskers_chase30_start
          - type: call-service
            name: Stop 30s Chase
            icon: mdi:stop
            action_name: Stop
            service: script.turn_on
            target:
              entity_id: script.huskers_chase30_stop
          - type: call-service
            name: Start Variable Chase
            icon: mdi:play-circle
            action_name: Start
            service: script.turn_on
            target:
              entity_id: script.huskers_chase_speed_start
          - type: call-service
            name: Stop Variable Chase
            icon: mdi:stop-circle
            action_name: Stop
            service: script.turn_on
            target:
              entity_id: script.huskers_chase_speed_stop
          - type: call-service
            name: Hail Varsity Burst
            icon: mdi:music-note
            action_name: Play
            service: script.turn_on
            target:
              entity_id: script.huskers_hail_burst_8s
          - type: call-service
            name: All Scarlet Scene
            icon: mdi:palette
            action_name: Activate
            service: scene.turn_on
            target:
              entity_id: scene.huskers_seven_all_scarlet_base
          - type: call-service
            name: Stop All Shows
            icon: mdi:stop-circle-outline
            action_name: Stop All
            service: script.turn_on
            target:
              entity_id: script.kiosk_stop_all_huskers_shows

      # Light Controls
      - type: grid
        square: false
        columns: 3
        cards:
          - type: light
            entity: light.theater_lights
            name: Theater Lights
          - type: light
            entity: light.front_porch_lights
            name: Front Porch
          - type: light
            entity: light.all_exterior_lights
            name: All Exterior
          - type: light
            entity: light.office_lights
            name: Office Lights
          - type: light
            entity: light.mainfloor_lights
            name: Main Floor
          - type: light
            entity: light.all_lights
            name: All Lights

      # Script Status
      - type: entities
        title: 'üìä Script Status'
        show_header_toggle: false
        entities:
          - entity: script.huskers_chase30_start
            name: 30s Chase (Start)
            secondary_info: last-changed
          - entity: script.huskers_chase30_loop
            name: 30s Chase (Loop)
            secondary_info: last-changed
          - entity: script.huskers_chase_speed_start
            name: Variable Chase (Start)
            secondary_info: last-changed
          - entity: script.huskers_chase_speed_loop
            name: Variable Chase (Loop)
            secondary_info: last-changed
          - entity: script.huskers_hail_burst_8s
            name: Hail Burst
            secondary_info: last-changed

      # Group Status
      - type: entities
        title: 'üîó Light Groups'
        show_header_toggle: false
        entities:
          - entity: group.huskers_eight_lights
            name: Huskers Eight Lights Group

  # ===============================
  # SYSTEM STATUS VIEW
  # ===============================
  - title: System Status
    path: huskers-system
    icon: mdi:cog
    cards:
      - type: markdown
        content: |
          # üîß System Status & Configuration

      # Game Data Status
      - type: entities
        title: 'üì° Game Data Status'
        show_header_toggle: false
        entities:
          - entity: sensor.huskers_team_name
            name: Team Name
            icon: mdi:football-helmet
          - entity: sensor.huskers_opponent_name_2
            name: Opponent Data
            icon: mdi:account-group
          - entity: sensor.huskers_team_score
            name: Team Score Data
            icon: mdi:scoreboard
          - entity: sensor.huskers_opponent_score_2
            name: Opponent Score Data
            icon: mdi:scoreboard-outline
          - entity: sensor.huskers_quarter
            name: Quarter Data
            icon: mdi:clock
          - entity: sensor.huskers_game_clock_ct_2
            name: Game Clock Data
            icon: mdi:timer

      # Game Phase Detection
      - type: entities
        title: 'üèà Game Phase Detection'
        show_header_toggle: false
        entities:
          - entity: binary_sensor.huskers_pregame_window
            name: Pregame Window
            icon: mdi:clock-start
          - entity: binary_sensor.huskers_game_in_progress_tt
            name: Game In Progress
            icon: mdi:play-circle
          - entity: binary_sensor.huskers_postgame_window
            name: Postgame Window
            icon: mdi:clock-end

      # Manual Controls & Testing
      - type: entities
        title: 'üéÆ Manual Controls & Testing'
        show_header_toggle: false
        entities:
          - entity: input_number.huskers_our_score
            name: Our Score (Auto)
          - entity: input_number.huskers_our_score_manual
            name: Our Score (Manual)
          - entity: input_number.huskers_kickoff_in_manual
            name: Kickoff In (Manual)
          - entity: input_text.huskers_last_score
            name: Last Score Text

      # Automation Status
      - type: entities
        title: 'ü§ñ Active Automations'
        show_header_toggle: false
        entities:
          - entity: automation.huskers_showtime_at_t_20
            name: Showtime at T-20
          - entity: automation.huskers_td_burst_on_score
            name: TD Burst on Score
          - entity: automation.huskers_postgame_cleanup
            name: Postgame Cleanup

      # System Information
      - type: markdown
        content: |
          ## üìã Current System Status

          **Working Entities**:
          ‚úÖ Live game scores and team data
          ‚úÖ Game phase detection (pregame/live/postgame)
          ‚úÖ Light show scripts (chase, hail burst)
          ‚úÖ Manual score controls for testing
          ‚úÖ Theater and exterior light controls

          **Issues Found**:
          ‚ùå ESPN API sensors not working (showing unavailable)
          ‚ùå Many advanced scripts showing unavailable
          ‚ùå Schedule data not loading properly
          ‚ùå Rankings data unavailable

          **Recommendations**:
          üîß Check ESPN API configuration
          üîß Verify internet connectivity for external APIs
          üîß Review template sensor configurations
          üîß Consider using manual score inputs for testing
