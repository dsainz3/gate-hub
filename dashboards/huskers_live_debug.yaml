title: Huskers Live & Debug
views:
  # ======================
  # VIEW 1 — Live Game (Huskers theme)
  # ======================
  - title: Live Game
    path: huskers-live
    icon: mdi:stadium
    theme: default
    badges: []
    cards:
      - type: markdown
        content: >-
          # 🏈 **Nebraska Huskers — Live**
          *Live game status, kickoff, venue, and score from `sensor.husker_team`.
          Scripts and buttons control LEDs + touchdown bursts.*

      # ---- Visual Scoreboard (logos + colors via custom:button-card) ----
      # Requires HACS → Frontend → Button Card
      - type: conditional
        conditions:
          - entity: sensor.husker_team
            state_not: 'unavailable'
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                # --- Nebraska ---
                - type: 'custom:button-card'
                  entity: sensor.husker_team
                  name: '[[[ return entity?.attributes?.team_name || "Nebraska"; ]]]'
                  label: '[[[ return (entity?.attributes?.team_score ?? "0").toString(); ]]]'
                  show_label: true
                  show_state: false
                  show_name: true
                  show_entity_picture: true
                  entity_picture: '[[[ return entity?.attributes?.team_logo; ]]]'
                  styles:
                    card:
                      - padding: 12px
                      - border-radius: 16px
                      - box-shadow: var(--ha-card-box-shadow)
                      - background: >-
                          [[[
                            const c = (entity?.attributes?.team_colors || ["#d00000","#ffffff"])[0];
                            return `linear-gradient(135deg, ${c} 0%, var(--card-background-color) 120%)`;
                          ]]]
                    name:
                      - font-weight: 700
                      - font-size: 18px
                      - color: var(--primary-text-color)
                    label:
                      - font-weight: 800
                      - font-size: 28px
                      - margin-top: 6px
                      - color: var(--primary-text-color)
                    entity_picture:
                      - width: 64px
                      - height: 64px
                      - border-radius: 12px

                # --- Opponent ---
                - type: 'custom:button-card'
                  entity: sensor.husker_team
                  name: '[[[ return entity?.attributes?.opponent_name || "Opponent"; ]]]'
                  label: '[[[ return (entity?.attributes?.opponent_score ?? "0").toString(); ]]]'
                  show_label: true
                  show_state: false
                  show_name: true
                  show_entity_picture: true
                  entity_picture: '[[[ return entity?.attributes?.opponent_logo; ]]]'
                  styles:
                    card:
                      - padding: 12px
                      - border-radius: 16px
                      - box-shadow: var(--ha-card-box-shadow)
                      - background: >-
                          [[[
                            const c = (entity?.attributes?.opponent_colors || ["#000000","#717073"])[0];
                            return `linear-gradient(135deg, ${c} 0%, var(--card-background-color) 120%)`;
                          ]]]
                    name:
                      - font-weight: 700
                      - font-size: 18px
                      - color: var(--primary-text-color)
                    label:
                      - font-weight: 800
                      - font-size: 28px
                      - margin-top: 6px
                      - color: var(--primary-text-color)
                    entity_picture:
                      - width: 64px
                      - height: 64px
                      - border-radius: 12px

            # Optional compact info beneath the big scoreboard
            - type: entities
              title: Game Info
              show_header_toggle: false
              entities:
                - entity: sensor.husker_team
                  name: Game State
                - type: attribute
                  entity: sensor.husker_team
                  attribute: event_name
                  name: Matchup
                - type: attribute
                  entity: sensor.husker_team
                  attribute: clock
                  name: Kickoff / Clock
                - type: attribute
                  entity: sensor.husker_team
                  attribute: venue
                  name: Venue
                - type: attribute
                  entity: sensor.husker_team
                  attribute: tv_network
                  name: Broadcast
                - type: attribute
                  entity: sensor.husker_team
                  attribute: odds
                  name: Odds
                - type: attribute
                  entity: sensor.husker_team
                  attribute: overunder
                  name: Over/Under

      # ---- Game controls (your existing scripts) ----
      - type: grid
        square: false
        columns: 3
        cards:
          - type: button
            name: Start Gameday LEDs
            icon: mdi:play-circle
            tap_action:
              action: call-service
              service: script.turn_on
              target:
                entity_id: script.huskers_led_gameday_start
          - type: button
            name: Touchdown Burst
            icon: mdi:football
            tap_action:
              action: call-service
              service: script.turn_on
              target:
                entity_id: script.huskers_touchdown_burst
          - type: button
            name: Stop & Restore
            icon: mdi:stop-circle
            tap_action:
              action: call-service
              service: script.turn_on
              target:
                entity_id: script.huskers_led_stop

      # ---- Quick lighting groups (context while watching) ----
      - type: entities
        title: Lights (Context)
        show_header_toggle: false
        entities:
          - light.theater_lights
          - light.front_porch_lights
          - light.all_exterior_lights
          - light.all_lights

  # ======================
  # VIEW 2 — Debug (Scenes, Scripts, Automations, Logs)
  # ======================
  - title: Debug
    path: huskers-debug
    icon: mdi:bug
    badges: []
    cards:
      - type: markdown
        content: >-
          # 🔧 Huskers Debug
          Manual triggers, scenes, and script runs for rehearsal/debugging.

      - type: entities
        title: Scenes
        show_header_toggle: false
        entities:
          - scene.huskers_scarlet_theater
          - scene.huskers_cream_theater
          - scene.huskers_alternating_exterior
          - scene.huskers_alternating_inverted_exterior

      - type: entities
        title: Scripts — Status
        show_header_toggle: false
        entities:
          - script.huskers_theater_show_start
          - script.huskers_theater_show_stop
          - script.huskers_exterior_show_start
          - script.huskers_exterior_show_stop
          - script.huskers_td_burst_bpm_theater
          - script.huskers_td_burst_bpm_exterior
          - script.huskers_touchdown_burst
          - script.huskers_led_td_burst
          - script.huskers_led_gameday_start
          - script.huskers_led_stop
          - script.huskers_rehearse_tminus20
          - script.huskers_rehearse_td
          - script.huskers_test_score_update
          - script.huskers_all_events_manual
          - script.huskers_all_events_manual2
          - script.huskers_cleanup_all

      - type: entities
        title: Last Triggered (key scripts)
        show_header_toggle: false
        entities:
          - type: attribute
            entity: script.huskers_theater_show_start
            attribute: last_triggered
            name: Theater Start — last_triggered
          - type: attribute
            entity: script.huskers_exterior_show_start
            attribute: last_triggered
            name: Exterior Start — last_triggered
          - type: attribute
            entity: script.huskers_led_gameday_start
            attribute: last_triggered
            name: LEDs Start — last_triggered
          - type: attribute
            entity: script.huskers_touchdown_burst
            attribute: last_triggered
            name: TD Burst — last_triggered

      - type: logbook
        title: Logbook — Huskers Entities
        entities:
          - sensor.husker_team
          - script.huskers_theater_show_start
          - script.huskers_theater_show_stop
          - script.huskers_exterior_show_start
          - script.huskers_exterior_show_stop
          - script.huskers_td_burst_bpm_theater
          - script.huskers_td_burst_bpm_exterior
          - script.huskers_touchdown_burst
          - script.huskers_led_td_burst
          - script.huskers_led_gameday_start
          - script.huskers_led_stop
          - script.huskers_rehearse_tminus20
          - script.huskers_rehearse_td
          - script.huskers_test_score_update
          - script.huskers_all_events_manual
          - script.huskers_all_events_manual2
          - script.huskers_cleanup_all
          - scene.huskers_scarlet_theater
          - scene.huskers_cream_theater
          - scene.huskers_alternating_exterior
          - scene.huskers_alternating_inverted_exterior
