title: Kiosk
views:
  - title: Snapshot
    path: snapshot
    icon: mdi:view-dashboard-variant
    type: sections
    max_columns: 3
    badges: []
    sections:
      - type: vertical-stack
        column_span: 3
        cards:
          - type: grid
            columns: 3
            square: false
            cards:
              - type: tile
                entity: sensor.kiosk_snapshot_lights_on
                name: Lights On
                icon: mdi:lightbulb-group
              - type: tile
                entity: sensor.kiosk_snapshot_plugs_on
                name: Plugs Active
                icon: mdi:power-plug-outline
              - type: tile
                entity: binary_sensor.kiosk_snapshot_automation_issue
                name: Automations
                icon: mdi:robot
              - type: tile
                entity: sensor.hygrometer_humidor_temperature
                name: Humidor degF
                icon: mdi:thermometer
              - type: tile
                entity: sensor.hygrometer_humidor_humidity
                name: Humidor %RH
                icon: mdi:water-percent
              - type: tile
                entity: sensor.kiosk_snapshot_aux_readout
                name: Humidor Climate
                icon: mdi:coolant-temperature
          - type: markdown
            style: |
              ha-card {padding: 18px 20px;}
            content: >-
              {% set today = now().strftime('%A, %B %d') %}
              {% set time = now().strftime('%I:%M %p') %}
              ### Welcome
              {{ today }} - {{ time }}
              ---
              Snapshot keeps the kiosk focused on game day, climate, and quick actions. Tap any tile to control devices or jump into the detailed tabs below.
      - type: grid
        title: Environment & Game Day
        column_span: 3
        cards:
          - type: vertical-stack
            cards:
              - type: weather-forecast
                entity: weather.kneplatt72
              - type: grid
                columns: 2
                square: false
                cards:
                  - type: custom:extended-gauge-card
                    title: Temperature
                    entity:
                      entity: sensor.outdoor_temperature_wx
                      settings:
                        name: Temperature
                        unit_of_measurement: degF
                        decimals: 1
                    main:
                      min_value: -20
                      max_value: 120
                      show_needle: true
                      show_entity_name: false
                      show_min_max_values: true
                  - type: custom:extended-gauge-card
                    title: Humidity
                    entity:
                      entity: sensor.outdoor_humidity_wx
                      settings:
                        name: Humidity
                        unit_of_measurement: '%'
                        decimals: 0
                    main:
                      min_value: 0
                      max_value: 100
                      show_needle: true
                      show_entity_name: false
                      show_min_max_values: true
                  - type: custom:extended-gauge-card
                    title: Wind Speed
                    entity:
                      entity: sensor.outdoor_wind_speed_wx
                      settings:
                        name: Wind Speed
                        unit_of_measurement: mph
                        decimals: 1
                    main:
                      min_value: 0
                      max_value: 40
                      show_needle: true
                      show_entity_name: false
                      show_min_max_values: true
                  - type: custom:extended-gauge-card
                    title: Pressure
                    entity:
                      entity: sensor.outdoor_pressure_wx
                      settings:
                        name: Pressure
                        unit_of_measurement: inHg
                        decimals: 1
                    main:
                      min_value: 28
                      max_value: 32
                      show_needle: true
                      show_entity_name: false
                      show_min_max_values: true
          - type: vertical-stack
            cards:
              - type: markdown
                style: |
                  ha-card {padding: 18px 20px;}
                content: >-
                  {% set next_game = states('sensor.huskers_next_game') %}
                  {% set record = states('sensor.huskers_record_dashboard') %}
                  {% set status = states('sensor.huskers_game_status_espn') %}
                  {% set kickoff = states('sensor.huskers_kickoff_in_effective') %}
                  {% set invalid = ['unknown', 'unavailable', 'none', '', 'None'] %}
                  {% set score_ok = has_value('sensor.husker_team') and state_attr('sensor.husker_team', 'team_score') is not none %}
                  ### Huskers Snapshot
                  **Next game:** {{ 'TBD' if next_game in invalid else next_game }}
                  **Record:** {{ 'N/A' if record in invalid else record }}
                  **Status:** {{ 'Unknown' if status in invalid else status | title }}
                  **Kickoff in:** {{ 'TBD' if kickoff in invalid else kickoff ~ ' min' }}
                  {% if score_ok %}
                  **Score:** {{ state_attr('sensor.husker_team', 'team_score') }} - {{ state_attr('sensor.husker_team', 'opponent_score') }}
                  {% endif %}
              - type: entities
                title: Game State
                show_header_toggle: false
                state_color: true
                entities:
                  - entity: binary_sensor.huskers_is_pregame_espn
                    name: Pregame
                  - entity: binary_sensor.huskers_is_live_espn
                    name: Live Now
                  - entity: binary_sensor.huskers_is_postgame_espn
                    name: Postgame
                  - entity: sensor.huskers_next_game
                    name: Details
                  - entity: sensor.huskers_kickoff_in_effective
                    name: Kickoff Countdown (min)
          - type: vertical-stack
            cards:
              - type: statistics-graph
                title: Lights & Plugs (24h)
                days_to_show: 1
                period: hour
                chart_type: line
                stat_types:
                  - mean
                  - max
                entities:
                  - entity: sensor.kiosk_snapshot_lights_on
                    name: Lights On
                  - entity: sensor.kiosk_snapshot_plugs_on
                    name: Plugs On
              - type: history-graph
                title: Automation Health
                hours_to_show: 24
                refresh_interval: 0
                entities:
                  - binary_sensor.kiosk_snapshot_automation_issue
                  - automation.evening_lights_at_sunset
                  - automation.night_mode_at_midnight
      - type: grid
        title: Quick Controls
        column_span: 3
        columns: 4
        square: false
        cards:
          - type: tile
            entity: sensor.kiosk_snapshot_lights_on
            name: Lights On
            color: amber
          - type: tile
            entity: sensor.kiosk_snapshot_plugs_on
            name: Plugs Active
            color: teal
          - type: tile
            entity: binary_sensor.kiosk_snapshot_automation_issue
            name: Automation Health
            color: red
          - type: tile
            entity: sensor.kiosk_snapshot_aux_readout
            name: Humidor Climate
            icon: mdi:coolant-temperature
          - type: tile
            entity: light.all_lights
            name: All Lights
            color: amber
            tap_action:
              action: toggle
          - type: tile
            entity: light.all_exterior_lights
            name: Exterior Lights
            color: amber
            tap_action:
              action: toggle
          - type: tile
            entity: group.kiosk_theater_lights
            name: Theater Group
            color: amber
            tap_action:
              action: toggle
          - type: tile
            entity: group.kiosk_front_lights
            name: Front Group
            color: amber
            tap_action:
              action: toggle
          - type: tile
            entity: group.kiosk_garage_lights
            name: Garage Group
            color: amber
            tap_action:
              action: toggle
          - type: tile
            entity: switch.plug_humidor
            name: Humidor Power
            color: teal
            tap_action:
              action: toggle
            features:
              - type: target-entity
                entity: sensor.plug_humidor_power
                name: Power (W)
          - type: tile
            entity: switch.plug_mainfloor_burner
            name: Main Floor Burner
            color: teal
            tap_action:
              action: toggle
            features:
              - type: target-entity
                entity: sensor.plug_mainfloor_burner_power
                name: Power (W)
          - type: tile
            entity: switch.plug_basement_burner
            name: Basement Burner
            color: teal
            tap_action:
              action: toggle
            features:
              - type: target-entity
                entity: sensor.plug_basement_burner_power
                name: Power (W)
          - type: tile
            entity: switch.plug_bedroom_burner
            name: Bedroom Burner
            color: teal
            tap_action:
              action: toggle
            features:
              - type: target-entity
                entity: sensor.plug_bedroom_burner_power
                name: Power (W)
          - type: tile
            entity: switch.tree_power_switch
            name: Tree Power
            color: teal
            tap_action:
              action: toggle
          - type: custom:extended-gauge-card
            title: Humidor Temp
            entity:
              entity: sensor.hygrometer_humidor_temperature
              settings:
                name: Humidor Temp
                unit_of_measurement: degF
                decimals: 1
            main:
              min_value: 55
              max_value: 80
              show_needle: true
              show_entity_name: false
              show_min_max_values: true
          - type: custom:extended-gauge-card
            title: Humidor Humidity
            entity:
              entity: sensor.hygrometer_humidor_humidity
              settings:
                name: Humidor Humidity
                unit_of_measurement: '%'
                decimals: 0
            main:
              min_value: 50
              max_value: 80
              show_needle: true
              show_entity_name: false
              show_min_max_values: true
      - type: grid
        title: Automations & Diagnostics
        column_span: 3
        cards:
          - type: grid
            columns: 4
            square: false
            cards:
              - type: button
                entity: automation.evening_lights_at_sunset
                name: Evening Lights
                icon: mdi:weather-sunset-down
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.evening_lights_at_sunset
                hold_action:
                  action: toggle
              - type: button
                entity: automation.night_mode_at_midnight
                name: Night Mode
                icon: mdi:weather-night
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.night_mode_at_midnight
                hold_action:
                  action: toggle
              - type: button
                entity: automation.early_morning_lights_0330
                name: Early Morning
                icon: mdi:alarm
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.early_morning_lights_0330
                hold_action:
                  action: toggle
              - type: button
                entity: automation.interior_lights_sunrise_off
                name: Interior Sunrise Off
                icon: mdi:weather-sunset-up
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.interior_lights_sunrise_off
                hold_action:
                  action: toggle
              - type: button
                entity: automation.exterior_lights_sunrise_off
                name: Exterior Sunrise Off
                icon: mdi:weather-sunny-off
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.exterior_lights_sunrise_off
                hold_action:
                  action: toggle
              - type: button
                entity: automation.exterior_led_monthly_effect
                name: Exterior LED Effect
                icon: mdi:led-strip-variant
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.exterior_led_monthly_effect
                hold_action:
                  action: toggle
              - type: button
                entity: automation.humidor_plug_temp_control
                name: Humidor Plug Control
                icon: mdi:cigar
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.humidor_plug_temp_control
                hold_action:
                  action: toggle
              - type: button
                entity: automation.burner_plugs_off_2300
                name: Burners Off 23:00
                icon: mdi:fire-off
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.burner_plugs_off_2300
                hold_action:
                  action: toggle
          - type: entities
            title: Automation Bundles
            show_header_toggle: false
            entities:
              - entity: group.kiosk_snapshot_automations
                name: Snapshot Bundle
              - entity: group.kiosk_all_automations
                name: Core Bundle
              - entity: sensor.kiosk_snapshot_plugs_on
                name: Active Plugs Count
  - title: Control
    path: control
    icon: mdi:lightbulb-group
    type: sections
    max_columns: 3
    badges: []
    sections:
      - type: grid
        title: Core Lighting
        cards:
          - type: tile
            entity: light.all_lights
            name: All Lights
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.all_exterior_lights
            name: Exterior Lights
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.permanent_outdoor_lights
            name: Permanent Strip
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.theater_lights
            name: Theater
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.office_lights
            name: Office
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.front_porch_lights
            name: Front Porch
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
      - type: grid
        title: Theater & Front Detail
        cards:
          - type: tile
            entity: light.light_theater_left
            name: Theater Left
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.light_theater_right
            name: Theater Right
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.light_front_left
            name: Front Left
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.light_front_right
            name: Front Right
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
      - type: grid
        title: Garage
        cards:
          - type: tile
            entity: light.light_garage_center
            name: Garage Center
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.light_garage_left
            name: Garage Left
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.light_garage_right
            name: Garage Right
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
      - type: grid
        title: Interior Rooms
        cards:
          - type: tile
            entity: light.light_parents
            name: Parents
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.light_guest_room
            name: Guest Room
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.light_attic
            name: Attic
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.sunroom_light
            name: Sunroom
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.livingroom_light
            name: Living Room
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.diningroom_light
            name: Dining Room
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.light_office
            name: Light-Office
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
          - type: tile
            entity: light.spare_light
            name: Spare
            color: amber
            tap_action:
              action: toggle
            features:
              - type: light-brightness
                show_percentage: true
      - type: entities
        title: Groups & Toggles
        state_color: true
        show_header_toggle: false
        entities:
          - entity: group.huskers_eight_lights
            name: Huskers - All Eight Lights
          - entity: group.kiosk_theater_lights
            name: Kiosk Theater Lights
          - entity: group.kiosk_front_lights
            name: Kiosk Front Lights
          - entity: group.kiosk_garage_lights
            name: Kiosk Garage Lights
          - entity: group.kiosk_all_automations
            name: Kiosk All Automations
          - entity: group.weather_dashboard_all
            name: Weather Dashboard - All
      - type: entities
        title: Purifiers
        state_color: true
        show_header_toggle: false
        entities:
          - entity: switch.bedroom_purifier_power_switch
            name: Bedroom Purifier Power
          - entity: select.bedroom_purifier_mode
            name: Bedroom Mode
          - entity: number.bedroom_purifier_gearmode
            name: Bedroom Gear
          - type: divider
          - entity: switch.guest_room_purifier_power_switch
            name: Guest Room Purifier Power
          - entity: select.guest_room_purifier_mode
            name: Guest Room Mode
          - entity: number.guest_room_purifier_gearmode
            name: Guest Room Gear
          - type: divider
          - entity: switch.garage_air_purifier_power_switch
            name: Garage Purifier Power
          - entity: select.garage_air_purifier_mode
            name: Garage Mode
          - entity: number.garage_air_purifier_gearmode
            name: Garage Gear
      - type: grid
        title: Plugs & Power
        cards:
          - type: tile
            entity: switch.plug_basement_burner
            name: Basement Burner
            color: teal
            tap_action:
              action: toggle
            features:
              - type: target-entity
                entity: sensor.plug_basement_burner_power
                name: Power (W)
          - type: tile
            entity: switch.plug_mainfloor_burner
            name: Main Floor Burner
            color: teal
            tap_action:
              action: toggle
            features:
              - type: target-entity
                entity: sensor.plug_mainfloor_burner_power
                name: Power (W)
          - type: tile
            entity: switch.plug_bedroom_burner
            name: Bedroom Burner
            color: teal
            tap_action:
              action: toggle
            features:
              - type: target-entity
                entity: sensor.plug_bedroom_burner_power
                name: Power (W)
          - type: tile
            entity: switch.plug_humidor
            name: Humidor Plug
            color: teal
            tap_action:
              action: toggle
            features:
              - type: target-entity
                entity: sensor.plug_humidor_power
                name: Power (W)
          - type: tile
            entity: switch.tree_power_switch
            name: Tree Power
            color: teal
            tap_action:
              action: toggle
  - title: Todos
    path: todos
    icon: mdi:check-circle-outline
    type: sections
    max_columns: 2
    badges: []
    sections:
      - type: grid
        column_span: 2
        cards:
          - type: markdown
            title: Running TODOs
            style: |
              ha-card {padding: 16px 20px;}
            content: |-
              {% set todo = states('sensor.todo_repo_tracker') %}
              {% if todo not in ['unknown', 'unavailable', ''] %}
                ```markdown
                {{ todo }}
                ```
              {% else %}
                TODO list not available.
              {% endif %}
      - type: grid
        cards:
          - type: history-graph
            title: Automation Health (72h)
            hours_to_show: 72
            refresh_interval: 0
            entities:
              - binary_sensor.kiosk_snapshot_automation_issue
  - title: Humidor
    path: humidor
    icon: mdi:cigar
    type: sections
    max_columns: 3
    badges: []
    sections:
      - type: grid
        column_span: 3
        cards:
          - type: chips
            alignment: center
            chips:
              - type: entity
                entity: sensor.hygrometer_humidor_temperature
                name: Temperature
                icon: mdi:thermometer
              - type: entity
                entity: sensor.hygrometer_humidor_humidity
                name: Humidity
                icon: mdi:water-percent
              - type: entity
                entity: sensor.humidor_system_status
                name: System Status
                icon: mdi:cigar
              - type: entity
                entity: switch.plug_humidor
                name: Humidor Power
                icon: mdi:power-plug
          - type: markdown
            style: |
              ha-card {padding: 16px 20px; font-size: 1.05rem;}
            content: |-
              ### Humidor Snapshot
              Target comfort band: **68-72 degF** / **62-68 %RH**.
              Tiles track live readings while the charts surface weekly trends and plug usage.
      - type: grid
        title: Live Readings
        column_span: 3
        cards:
          - type: custom:extended-gauge-card
            title: Temperature
            entity:
              entity: sensor.hygrometer_humidor_temperature
              settings:
                name: Temperature
                unit_of_measurement: degF
                decimals: 1
            main:
              min_value: 55
              max_value: 80
              show_needle: true
              show_entity_name: false
              show_min_max_values: true
          - type: custom:extended-gauge-card
            title: Humidity
            entity:
              entity: sensor.hygrometer_humidor_humidity
              settings:
                name: Humidity
                unit_of_measurement: '%'
                decimals: 0
            main:
              min_value: 50
              max_value: 80
              show_needle: true
              show_entity_name: false
              show_min_max_values: true
          - type: tile
            entity: sensor.humidor_system_status
            name: System Status
            color: green
            features:
              - type: target-entity
                entity: switch.plug_humidor
                name: Plug
          - type: tile
            entity: sensor.humidor_system_health
            name: System Health
            color: blue
          - type: custom:extended-gauge-card
            title: Plug Power
            entity:
              entity: sensor.plug_humidor_power
              settings:
                name: Plug Power
                unit_of_measurement: W
                decimals: 0
            main:
              min_value: 0
              max_value: 150
              show_needle: true
              show_entity_name: false
              show_min_max_values: true
      - type: grid
        title: Trend Metrics
        column_span: 3
        cards:
          - type: tile
            entity: sensor.humidor_temp_stats_24h
            name: Temp Mean (24h)
          - type: tile
            entity: sensor.humidor_temp_range_today
            name: Temp Range (24h)
          - type: tile
            entity: sensor.humidor_temp_change_1h
            name: Temp Change (1h)
          - type: tile
            entity: sensor.humidor_temperature_trend
            name: Temp Trend
          - type: tile
            entity: sensor.humidor_humidity_stats_24h
            name: Humidity Mean (24h)
          - type: tile
            entity: sensor.humidor_humidity_range_today
            name: Humidity Range (24h)
          - type: tile
            entity: sensor.humidor_humidity_change_1h
            name: Humidity Change (1h)
      - type: grid
        column_span: 3
        cards:
          - type: statistics-graph
            title: Temperature & Humidity (7d)
            days_to_show: 7
            period: hour
            chart_type: line
            stat_types:
              - mean
              - min
              - max
            entities:
              - entity: sensor.hygrometer_humidor_temperature
                name: Temperature
              - entity: sensor.hygrometer_humidor_humidity
                name: Humidity
          - type: history-graph
            title: Power & Delta (48h)
            hours_to_show: 48
            refresh_interval: 0
            entities:
              - sensor.plug_humidor_power
              - sensor.humidor_temp_change_1h
              - sensor.humidor_humidity_change_1h
      - type: entities
        title: Controls & Diagnostics
        state_color: true
        show_header_toggle: false
        entities:
          - entity: switch.plug_humidor
            name: Humidor Power
          - entity: select.plug_humidor_power_on_behavior
            name: Power-on Behavior
          - entity: sensor.plug_humidor_energy
            name: Energy (kWh)
          - entity: sensor.plug_humidor_current
            name: Current (A)
          - entity: sensor.plug_humidor_voltage
            name: Voltage (V)
          - entity: sensor.hygrometer_humidor_battery
            name: Sensor Battery
      - type: logbook
        column_span: 3
        title: Humidor Activity Log
        hours_to_show: 72
        entities:
          - switch.plug_humidor
          - sensor.hygrometer_humidor_temperature
          - sensor.hygrometer_humidor_humidity
