title: Kiosk
views:
  - title: Snapshot
    path: snapshot
    icon: mdi:view-dashboard-variant
    badges: []
    cards:
      - type: grid
        title: Conditions & Game Day
        square: false
        columns: 2
        cards:
          - type: vertical-stack
            cards:
              - type: weather-forecast
                entity: weather.kneplatt72
              - type: entities
                title: Weather Now
                show_header_toggle: false
                entities:
                  - entity: sensor.outdoor_temperature_wx
                    name: Temperature
                  - entity: sensor.outdoor_humidity_wx
                    name: Humidity
                  - entity: sensor.outdoor_wind_speed_wx
                    name: Wind Speed
                  - entity: sensor.outdoor_pressure_wx
                    name: Pressure
          - type: vertical-stack
            cards:
              - type: markdown
                style: |
                  ha-card {padding: 18px 20px;}
                content: |
                  {% set next_game = states('sensor.huskers_next_game') %}
                  {% set record = states('sensor.huskers_record_dashboard') %}
                  {% set status = states('sensor.huskers_game_status_espn') %}
                  {% set kickoff = states('sensor.huskers_kickoff_in_effective') %}
                  {% set invalid = ['unknown', 'unavailable', 'none', '', 'None'] %}
                  {% set score_ok = has_value('sensor.husker_team') and state_attr('sensor.husker_team', 'team_score') is not none %}
                  ### Huskers Snapshot
                  **Next game:** {{ 'TBD' if next_game in invalid else next_game }}
                  **Record:** {{ 'N/A' if record in invalid else record }}
                  **Status:** {{ 'Unknown' if status in invalid else status | title }}
                  **Kickoff in:** {{ 'TBD' if kickoff in invalid else kickoff ~ ' min' }}
                  {% if score_ok %}
                  **Score:** {{ state_attr('sensor.husker_team', 'team_score') }} - {{ state_attr('sensor.husker_team', 'opponent_score') }}
                  {% endif %}
              - type: entities
                title: Game State
                show_header_toggle: false
                state_color: true
                entities:
                  - entity: binary_sensor.huskers_is_pregame_espn
                    name: Pregame
                  - entity: binary_sensor.huskers_is_live_espn
                    name: Live Now
                  - entity: binary_sensor.huskers_is_postgame_espn
                    name: Postgame
                  - entity: sensor.huskers_next_game
                    name: Details
                  - entity: sensor.huskers_kickoff_in_effective
                    name: Kickoff Countdown (min)
      - type: grid
        title: Lights Overview
        square: false
        columns: 4
        cards:
          - type: tile
            entity: sensor.kiosk_snapshot_lights_on
            name: Lights On
          - type: tile
            entity: light.all_lights
            name: All Lights
            tap_action:
              action: toggle
          - type: tile
            entity: light.all_exterior_lights
            name: Exterior Lights
            tap_action:
              action: toggle
          - type: tile
            entity: group.kiosk_theater_lights
            name: Theater Group
            tap_action:
              action: toggle
          - type: tile
            entity: group.kiosk_front_lights
            name: Front Group
            tap_action:
              action: toggle
          - type: tile
            entity: group.kiosk_garage_lights
            name: Garage Group
            tap_action:
              action: toggle
      - type: grid
        title: Auxiliary & Humidor
        square: false
        columns: 3
        cards:
          - type: tile
            entity: sensor.kiosk_snapshot_plugs_on
            name: Plugs On
          - type: tile
            entity: sensor.kiosk_snapshot_aux_readout
            name: Humidor Climate
          - type: tile
            entity: switch.plug_humidor
            name: Humidor Power
            tap_action:
              action: toggle
          - type: tile
            entity: sensor.hygrometer_humidor_temperature
            name: Humidor Temp
            features:
              - type: graph
                graph: line
                hours_to_show: 24
                detail: 2
          - type: tile
            entity: sensor.hygrometer_humidor_humidity
            name: Humidor Humidity
            features:
              - type: graph
                graph: line
                hours_to_show: 24
                detail: 2
          - type: tile
            entity: switch.plug_mainfloor_burner
            name: Main Floor Burner
            tap_action:
              action: toggle
          - type: tile
            entity: switch.plug_basement_burner
            name: Basement Burner
            tap_action:
              action: toggle
          - type: tile
            entity: switch.plug_bedroom_burner
            name: Bedroom Burner
            tap_action:
              action: toggle
          - type: tile
            entity: switch.tree_power_switch
            name: Tree Power
            tap_action:
              action: toggle
      - type: vertical-stack
        cards:
          - type: tile
            entity: binary_sensor.kiosk_snapshot_automation_issue
            name: Automation Health
          - type: grid
            title: Automations
            square: false
            columns: 4
            cards:
              - type: button
                entity: automation.evening_lights_at_sunset
                name: Evening Lights at Sunset
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.evening_lights_at_sunset
                hold_action:
                  action: toggle
              - type: button
                entity: automation.night_mode_at_midnight
                name: Night Mode at Midnight
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.night_mode_at_midnight
                hold_action:
                  action: toggle
              - type: button
                entity: automation.early_morning_lights_0330
                name: Early Morning Lights 0330
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.early_morning_lights_0330
                hold_action:
                  action: toggle
              - type: button
                entity: automation.interior_lights_sunrise_off
                name: Interior Lights Sunrise Off
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.interior_lights_sunrise_off
                hold_action:
                  action: toggle
              - type: button
                entity: automation.exterior_lights_sunrise_off
                name: Exterior Lights Sunrise Off
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.exterior_lights_sunrise_off
                hold_action:
                  action: toggle
              - type: button
                entity: automation.exterior_led_monthly_effect
                name: Exterior LED Monthly Effect
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.exterior_led_monthly_effect
                hold_action:
                  action: toggle
              - type: button
                entity: automation.humidor_plug_temp_control
                name: Humidor Plug Temp Control
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.humidor_plug_temp_control
                hold_action:
                  action: toggle
              - type: button
                entity: automation.burner_plugs_off_2300
                name: Burner Plugs Off 2300
                show_state: true
                tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.burner_plugs_off_2300
                hold_action:
                  action: toggle
          - type: entities
            title: Automation Details
            show_header_toggle: false
            entities:
              - entity: group.kiosk_snapshot_automations
                name: Snapshot Bundle
              - entity: group.kiosk_all_automations
                name: Core Bundle
              - entity: sensor.kiosk_snapshot_plugs_on
                name: Active Plugs Count
  - title: Control
    path: control
    icon: mdi:lightbulb-group
    cards:
      ############################################################
      # LIGHTS - AT-A-GLANCE (ALL as LIGHT CARDS)
      ############################################################
      - type: grid
        title: Lights - Overview
        columns: 4
        square: false
        cards:
          # Core groups that are lights
          - type: light
            entity: light.all_lights
            name: All Lights
          - type: light
            entity: light.all_exterior_lights
            name: Exterior Lights

          # Main zones / rooms
          - type: light
            entity: light.theater_lights
            name: Theater
          - type: light
            entity: light.office_lights
            name: Office
          - type: light
            entity: light.front_porch_lights
            name: Front Porch
          - type: light
            entity: light.permanent_outdoor_lights
            name: Permanent Strip

          # Theater detail
          - type: light
            entity: light.light_theater_left
            name: Theater Left
          - type: light
            entity: light.light_theater_right
            name: Theater Right

          # Front detail
          - type: light
            entity: light.light_front_left
            name: Front Left
          - type: light
            entity: light.light_front_right
            name: Front Right

          # Garage
          - type: light
            entity: light.light_garage_center
            name: Garage Center
          - type: light
            entity: light.light_garage_left
            name: Garage Left
          - type: light
            entity: light.light_garage_right
            name: Garage Right

          # Other rooms
          - type: light
            entity: light.light_parents
            name: Parents
          - type: light
            entity: light.light_guest_room
            name: Guest Room
          - type: light
            entity: light.light_attic
            name: Attic
          - type: light
            entity: light.sunroom_light
            name: Sunroom
          - type: light
            entity: light.livingroom_light
            name: Living Room
          - type: light
            entity: light.diningroom_light
            name: Dining Room
          - type: light
            entity: light.light_office
            name: Light-Office
          - type: light
            entity: light.spare_light
            name: Spare

      ############################################################
      # GROUPS - SIMPLE TOGGLES (only groups you actually have)
      ############################################################
      - type: entities
        title: Groups - Toggles
        state_color: true
        show_header_toggle: false
        entities:
          - entity: group.huskers_eight_lights
            name: Huskers - All Eight Lights
          - entity: group.kiosk_theater_lights
            name: Kiosk Theater Lights
          - entity: group.kiosk_front_lights
            name: Kiosk Front Lights
          - entity: group.kiosk_garage_lights
            name: Kiosk Garage Lights
          - entity: group.kiosk_all_automations
            name: Kiosk All Automations
          - entity: group.weather_dashboard_all
            name: Weather Dashboard - All

      ############################################################
      # PURIFIERS - POWER & MODES
      ############################################################
      - type: entities
        title: Purifiers
        state_color: true
        show_header_toggle: false
        entities:
          - entity: switch.bedroom_purifier_power_switch
            name: Bedroom Purifier Power
          - entity: select.bedroom_purifier_mode
            name: Bedroom Mode
          - entity: number.bedroom_purifier_gearmode
            name: Bedroom Gear
          - type: divider
          - entity: switch.guest_room_purifier_power_switch
            name: Guest Room Purifier Power
          - entity: select.guest_room_purifier_mode
            name: Guest Room Mode
          - entity: number.guest_room_purifier_gearmode
            name: Guest Room Gear
          - type: divider
          - entity: switch.garage_air_purifier_power_switch
            name: Garage Purifier Power
          - entity: select.garage_air_purifier_mode
            name: Garage Mode
          - entity: number.garage_air_purifier_gearmode
            name: Garage Gear

      ############################################################
      # PLUGS - POWER + LIVE WATTS
      ############################################################
      - type: entities
        title: Plugs & Power
        state_color: true
        show_header_toggle: false
        entities:
          - entity: switch.plug_basement_burner
            name: Basement Burner
          - entity: sensor.plug_basement_burner_power
            name: Basement Burner Power (W)
          - type: divider
          - entity: switch.plug_mainfloor_burner
            name: Mainfloor Burner
          - entity: sensor.plug_mainfloor_burner_power
            name: Mainfloor Burner Power (W)
          - type: divider
          - entity: switch.plug_bedroom_burner
            name: Bedroom Burner
          - entity: sensor.plug_bedroom_burner_power
            name: Bedroom Burner Power (W)
          - type: divider
          - entity: switch.plug_humidor
            name: Humidor
          - entity: sensor.plug_humidor_power
            name: Humidor Power (W)
          - type: divider
          - entity: switch.tree_power_switch
            name: Tree Power

  - title: Todos
    path: todos
    icon: mdi:check-circle-outline
    cards:
      - type: markdown
        title: Running TODOs
        content: |-
          {% set todo = states('sensor.todo_repo_tracker') %}
          {% if todo not in ['unknown', 'unavailable', ''] %}
            ```markdown
            {{ todo }}
            ```
          {% else %}
            TODO list not available.
          {% endif %}
  - title: Humidor
    path: humidor
    icon: mdi:cigar
    cards:
      - type: markdown
        style: |
          ha-card {padding: 16px 20px; font-size: 1.05rem;}
        content: |
          ### Humidor Snapshot
          Target comfort band: **68-72 degF** temperature / **62-68 %** humidity.
          Tiles track live readings while the charts below surface weekly trends and plug usage.

      - type: grid
        columns: 3
        square: false
        cards:
          - type: tile
            entity: sensor.hygrometer_humidor_temperature
            name: Temperature
            color: accent
            features:
              - type: graph
                graph: line
                hours_to_show: 24
                detail: 2
          - type: tile
            entity: sensor.hygrometer_humidor_humidity
            name: Humidity
            color: accent
            features:
              - type: graph
                graph: line
                hours_to_show: 24
                detail: 2
          - type: tile
            entity: sensor.humidor_system_status
            name: System Status
            color: green
            features:
              - type: target-entity
                entity: switch.plug_humidor

      - type: grid
        title: Trend Metrics
        columns: 4
        square: false
        cards:
          - type: tile
            entity: sensor.humidor_temp_stats_24h
            name: Temp Mean (24h)
          - type: tile
            entity: sensor.humidor_temp_range_today
            name: Temp Range (24h)
          - type: tile
            entity: sensor.humidor_temp_change_1h
            name: Temp Change (1h)
          - type: tile
            entity: sensor.humidor_temperature_trend
            name: Temp Trend
          - type: tile
            entity: sensor.humidor_humidity_stats_24h
            name: Humidity Mean (24h)
          - type: tile
            entity: sensor.humidor_humidity_range_today
            name: Humidity Range (24h)
          - type: tile
            entity: sensor.humidor_humidity_change_1h
            name: Humidity Change (1h)
          - type: tile
            entity: sensor.humidor_system_health
            name: System Health
            color: blue

      - type: grid
        columns: 2
        square: false
        cards:
          - type: statistics-graph
            title: Temperature & Humidity (7d)
            days_to_show: 7
            period: hour
            chart_type: line
            stat_types:
              - mean
              - min
              - max
            entities:
              - entity: sensor.hygrometer_humidor_temperature
                name: Temperature
              - entity: sensor.hygrometer_humidor_humidity
                name: Humidity
          - type: history-graph
            title: Power & Delta (48h)
            hours_to_show: 48
            refresh_interval: 0
            entities:
              - sensor.plug_humidor_power
              - sensor.humidor_temp_change_1h
              - sensor.humidor_humidity_change_1h

      - type: entities
        title: Controls & Diagnostics
        state_color: true
        show_header_toggle: false
        entities:
          - entity: switch.plug_humidor
            name: Humidor Power
          - entity: select.plug_humidor_power_on_behavior
            name: Power-on Behavior
          - entity: sensor.plug_humidor_energy
            name: Energy (kWh)
          - entity: sensor.plug_humidor_current
            name: Current (A)
          - entity: sensor.plug_humidor_voltage
            name: Voltage (V)
          - entity: sensor.hygrometer_humidor_battery
            name: Sensor Battery

      - type: logbook
        title: Humidor Activity Log
        hours_to_show: 72
        entities:
          - switch.plug_humidor
          - sensor.hygrometer_humidor_temperature
          - sensor.hygrometer_humidor_humidity
