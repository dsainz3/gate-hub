
<!doctype html>
<html lang="en" class="no-js">
  <head>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">

        <meta name="description" content="Hypermodern documentation for the gate-hub Home Assistant deployment.">




        <link rel="prev" href="../huskers-dashboard-history/">


        <link rel="next" href="../../archive/ai-automation-builder/">


      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">



        <title>Pre-commit Quality Strategy - gate-hub Documentation</title>



      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">












        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>



    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>






  </head>


    <body dir="ltr">


    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">


        <a href="#pre-commit-strategy-for-green-prs" class="md-skip">
          Skip to content
        </a>

    </div>
    <div data-md-component="announce">

    </div>




<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="gate-hub Documentation" class="md-header__button md-logo" aria-label="gate-hub Documentation" data-md-component="logo">


  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">

      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            gate-hub Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">

              Pre-commit Quality Strategy

          </span>
        </div>
      </div>
    </div>


      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>





        <label class="md-header__button md-icon" for="__search">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">

        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>

    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>



      <div class="md-header__source">
        <a href="https://github.com/dsainz3/gate-hub" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>

  </nav>

</header>

    <div class="md-container" data-md-component="container">





<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">






    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">





  Home

      </a>
    </li>










      <li class="md-tabs__item">
        <a href="../../how-to/ci/" class="md-tabs__link">



  How-to Guides

        </a>
      </li>











      <li class="md-tabs__item">
        <a href="../../reference/documentation-style-guide/" class="md-tabs__link">



  Reference

        </a>
      </li>













      <li class="md-tabs__item md-tabs__item--active">
        <a href="../optimization-plan/" class="md-tabs__link">



  Explanation

        </a>
      </li>











      <li class="md-tabs__item">
        <a href="../../archive/ai-automation-builder/" class="md-tabs__link">



  Archive

        </a>
      </li>











      <li class="md-tabs__item">
        <a href="../../adr/_template/" class="md-tabs__link">



  ADRs

        </a>
      </li>




    </ul>
  </div>
</nav>



      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">



              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">






<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="gate-hub Documentation" class="md-nav__button md-logo" aria-label="gate-hub Documentation" data-md-component="logo">


  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    gate-hub Documentation
  </label>

    <div class="md-nav__source">
      <a href="https://github.com/dsainz3/gate-hub" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>

  <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">



  <span class="md-ellipsis">
    Home

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>



















    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >


          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">



  <span class="md-ellipsis">
    How-to Guides

  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            How-to Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../how-to/ci/" class="md-nav__link">



  <span class="md-ellipsis">
    CI Pipeline Runbook

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/pre-commit/" class="md-nav__link">



  <span class="md-ellipsis">
    Pre-commit Workflow

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/agenda-planner/" class="md-nav__link">



  <span class="md-ellipsis">
    Agenda Planner Setup

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/f1/" class="md-nav__link">



  <span class="md-ellipsis">
    F1 Weekend Toolkit

  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/addons/mqtt/" class="md-nav__link">



  <span class="md-ellipsis">
    Mosquitto MQTT Add-on

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/addons/govee2mqtt/" class="md-nav__link">



  <span class="md-ellipsis">
    Govee2MQTT Add-on

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/lighting/govee-lighting-stack/" class="md-nav__link">



  <span class="md-ellipsis">
    Govee Lighting Stack

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/huskers/dashboard/" class="md-nav__link">



  <span class="md-ellipsis">
    Huskers Dashboard Guide

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/lighting/husker-led-mqtt/" class="md-nav__link">



  <span class="md-ellipsis">
    Husker LED MQTT Controls

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../how-to/kiosk/sanitation-schedule/" class="md-nav__link">



  <span class="md-ellipsis">
    Kiosk Sanitation Schedule

  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>



















    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >


          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">



  <span class="md-ellipsis">
    Reference

  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../reference/documentation-style-guide/" class="md-nav__link">



  <span class="md-ellipsis">
    Documentation Style Guide

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/automations/" class="md-nav__link">



  <span class="md-ellipsis">
    Automation Catalog

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/holidays/" class="md-nav__link">



  <span class="md-ellipsis">
    Holiday Mode Reference

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/agenda-planner/" class="md-nav__link">



  <span class="md-ellipsis">
    Agenda Planner Reference

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/infrastructure/" class="md-nav__link">



  <span class="md-ellipsis">
    Infrastructure Overview

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>




          </ul>
        </nav>

    </li>
























    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>


          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">



  <span class="md-ellipsis">
    Explanation

  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Explanation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../optimization-plan/" class="md-nav__link">



  <span class="md-ellipsis">
    Optimization Plan

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>










    <li class="md-nav__item">
      <a href="../huskers-dashboard-history/" class="md-nav__link">



  <span class="md-ellipsis">
    Huskers Dashboard History

  </span>




    <span class="md-status md-status--active"></span>




      </a>
    </li>












    <li class="md-nav__item md-nav__item--active">

      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">





        <label class="md-nav__link md-nav__link--active" for="__toc">



  <span class="md-ellipsis">
    Pre-commit Quality Strategy

  </span>




    <span class="md-status md-status--active"></span>




          <span class="md-nav__icon md-icon"></span>
        </label>

      <a href="./" class="md-nav__link md-nav__link--active">



  <span class="md-ellipsis">
    Pre-commit Quality Strategy

  </span>




    <span class="md-status md-status--active"></span>




      </a>



<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#why-we-invest-in-pre-commit" class="md-nav__link">
    <span class="md-ellipsis">
      Why We Invest in Pre-commit
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#how-ci-blocks-a-pull-request" class="md-nav__link">
    <span class="md-ellipsis">
      How CI Blocks a Pull Request
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#definition-of-ready-to-push" class="md-nav__link">
    <span class="md-ellipsis">
      Definition of “Ready to Push”
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#handling-hook-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Handling Hook Failures
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#continuous-improvement" class="md-nav__link">
    <span class="md-ellipsis">
      Continuous Improvement
    </span>
  </a>

</li>

    </ul>

</nav>

    </li>




          </ul>
        </nav>

    </li>



















    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >


          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">



  <span class="md-ellipsis">
    Archive

  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../archive/ai-automation-builder/" class="md-nav__link">



  <span class="md-ellipsis">
    AI Automation Builder (Archived)

  </span>




    <span class="md-status md-status--archived"></span>




      </a>
    </li>




          </ul>
        </nav>

    </li>



















    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >


          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">



  <span class="md-ellipsis">
    ADRs

  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            ADRs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../adr/_template/" class="md-nav__link">



  <span class="md-ellipsis">
    Template

  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>



  </ul>
</nav>
                  </div>
                </div>
              </div>



              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#why-we-invest-in-pre-commit" class="md-nav__link">
    <span class="md-ellipsis">
      Why We Invest in Pre-commit
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#how-ci-blocks-a-pull-request" class="md-nav__link">
    <span class="md-ellipsis">
      How CI Blocks a Pull Request
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#definition-of-ready-to-push" class="md-nav__link">
    <span class="md-ellipsis">
      Definition of “Ready to Push”
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#handling-hook-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Handling Hook Failures
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#continuous-improvement" class="md-nav__link">
    <span class="md-ellipsis">
      Continuous Improvement
    </span>
  </a>

</li>

    </ul>

</nav>
                  </div>
                </div>
              </div>



            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">








<h1 id="pre-commit-strategy-for-green-prs">Pre-commit Strategy for Green PRs<a class="headerlink" href="#pre-commit-strategy-for-green-prs" title="Permanent link">&para;</a></h1>
<p>We rely on pre-commit to stop avoidable defects before they reach CI. The hooks mirror the checks that gate every pull request. When they pass locally, the CI run stays green, reviewers stay focused on the change itself, and merges happen without churn.</p>
<h2 id="why-we-invest-in-pre-commit">Why We Invest in Pre-commit<a class="headerlink" href="#why-we-invest-in-pre-commit" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Fast feedback:</strong> Hooks run in seconds on a developer workstation versus several minutes in GitHub Actions.</li>
<li><strong>PR signal quality:</strong> A green pipeline signals “ready for review”; red builds slow code review and slip our deployment cadence.</li>
<li><strong>Consistent automation:</strong> YAML formatting, lint rules, and Home Assistant validation stay identical everywhere because the same config powers local and remote runs.</li>
<li><strong>Reduced merge debt:</strong> Auto-fixes happen on the contributor’s machine, eliminating follow-up commits or forced pushes during review.</li>
</ul>
<h2 id="how-ci-blocks-a-pull-request">How CI Blocks a Pull Request<a class="headerlink" href="#how-ci-blocks-a-pull-request" title="Permanent link">&para;</a></h2>
<p>Two jobs in <code>.github/workflows/ci.yml</code> must pass before a PR can merge:
- <code>ruff</code> runs the Python linter and formatter in check-only mode.
- <code>pre-commit</code> skips the Ruff hooks but executes everything else (YAML formatter, whitespace hygiene, <code>yamllint</code>, and <code>hass-config-check</code>).</p>
<p>If either job fails, the PR stays blocked. The quickest fix is to reproduce the failing hook locally with the same configuration.</p>
<h2 id="definition-of-ready-to-push">Definition of “Ready to Push”<a class="headerlink" href="#definition-of-ready-to-push" title="Permanent link">&para;</a></h2>
<p>Do these before opening or updating a PR:
1. Activate the project environment: <code>poetry install</code> (first time) and <code>poetry shell</code> (optional) or <code>poetry run</code>.
2. Run <code>pre-commit run --all-files</code> to exercise the full hook suite.
3. Run <code>ruff check .</code> and <code>ruff format --check .</code> if you touched Python and want to mirror the dedicated CI job.
4. Restage any files changed by auto-fixes and re-run until clean.</p>
<h2 id="handling-hook-failures">Handling Hook Failures<a class="headerlink" href="#handling-hook-failures" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Formatting rewrites:</strong> Stage the modified files (<code>git add</code>) and retry the commit.</li>
<li><strong>YAML schema violations:</strong> Review the error output; run <code>yamllint &lt;file&gt;</code> for focused debugging.</li>
<li><strong>Home Assistant validation:</strong> Use <code>pre-commit run hass-config-check</code> or <code>poetry run python .ci/run_hass_check.py</code> for a single repro. When the error references missing secrets, ensure <code>.ci/fakesecrets.yaml</code> covers new keys.</li>
<li><strong>Upstream updates:</strong> If hooks complain about missing versions, run <code>pre-commit autoupdate</code> in a dedicated PR.</li>
</ul>
<h2 id="continuous-improvement">Continuous Improvement<a class="headerlink" href="#continuous-improvement" title="Permanent link">&para;</a></h2>
<p>We track flaky or slow hooks in the docs backlog. When a hook causes repeated false positives, log an issue and discuss whether to tweak configuration or move the check to a scheduled workflow.</p>
<p>Future enhancements under discussion:
- Lightweight nightly run of <code>hass --script check_config</code> to catch environment drift without blocking PRs.
- Per-feature hook profiles that developers can opt into while experimenting (without weakening the default gate).</p>
<p>By treating pre-commit as the first line of defence, we keep pull requests reviewable, shorten feedback loops, and ensure production automation stays reliable.</p>
















              </article>
            </div>


<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>

      </main>

        <footer class="md-footer">

  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">


    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>

</div>

    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>




      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>


      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>


  </body>
</html>
