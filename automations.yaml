huskers_touchdown_burst:
  alias: "Huskers: Touchdown Burst (Theater Alternating, Snapshot/Restore)"
  mode: restart
  sequence:
    # 1) Snapshot current state of both theater lights
    - service: scene.create
      data:
        scene_id: huskers_theater_pre_burst
        snapshot_entities:
          - light.light_theater_left
          - light.light_theater_right

    # 2) Burst variables
    - variables:
        flashes: 6 # total swaps (12 color hits)
        on_time: 0.35 # hold time for each color
        trans: 0.25 # smooth transition time

    # 3) Alternate Scarlet <-> Cream
    - repeat:
        count: "{{ flashes }}"
        sequence:
          # Left red, right cream
          - service: light.turn_on
            target:
              entity_id: light.light_theater_left
            data:
              hs_color: [355, 90]
              brightness: 255
              transition: "{{ trans }}"
          - service: light.turn_on
            target:
              entity_id: light.light_theater_right
            data:
              hs_color: [48, 12]
              brightness: 255
              transition: "{{ trans }}"
          - delay: "{{ on_time }}"

          # Swap: left cream, right red
          - service: light.turn_on
            target:
              entity_id: light.light_theater_left
            data:
              hs_color: [48, 12]
              brightness: 255
              transition: "{{ trans }}"
          - service: light.turn_on
            target:
              entity_id: light.light_theater_right
            data:
              hs_color: [355, 90]
              brightness: 255
              transition: "{{ trans }}"
          - delay: "{{ on_time }}"

    # 4) Small settle, then restore the snapshot (previous state)
    - delay: 0.2
    - service: scene.turn_on
      target:
        entity_id: scene.huskers_theater_pre_burst
      data:
        transition: 1.0
