- id: humidor_plug_temp_control
  alias: Humidor Plug – Temperature Control
  description: Turn ON humidor plug when temp > 74°F; turn OFF when temp < 68°F.
  trigger:
  - platform: numeric_state
    entity_id: sensor.hygrometer_humidor_temperature
    above: 74
  - platform: numeric_state
    entity_id: sensor.hygrometer_humidor_temperature
    below: 68
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.hygrometer_humidor_temperature
        above: 74
      sequence:
      - condition: state
        entity_id: switch.plug_humidor
        state: 'off'
      - service: switch.turn_on
        target:
          entity_id: switch.plug_humidor
    - conditions:
      - condition: numeric_state
        entity_id: sensor.hygrometer_humidor_temperature
        below: 68
      sequence:
      - condition: state
        entity_id: switch.plug_humidor
        state: 'on'
      - service: switch.turn_off
        target:
          entity_id: switch.plug_humidor
  mode: single
- id: outdoor_lights_control
  alias: Outdoor Lights Control - Sunrise/Sunset
  trigger:
  - platform: sun
    event: sunrise
    id: sunrise
  - platform: sun
    event: sunset
    id: sunset
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: sunrise
      sequence:
      - service: light.turn_off
        target:
          entity_id:
          - light.permanent_outdoor_lights
          - light.garage_left
          - light.garage_right
          - light.garage_center
          - light.front_porch_lights
    - conditions:
      - condition: trigger
        id: sunset
      sequence:
      - service: light.turn_on
        target:
          entity_id: light.permanent_outdoor_lights
        data:
          brightness_pct: 50
      - service: light.turn_on
        target:
          entity_id:
          - light.garage_left
          - light.garage_right
          - light.garage_center
          - light.front_porch_lights
        data:
          brightness_pct: 1
  mode: single
- id: early_morning_lights
  alias: 3:30 AM Light Activation
  triggers:
  - at: 03:30:00
    trigger: time
  conditions: []
  actions:
  - parallel:
    - sequence:
      - target:
          entity_id: light.permanent_outdoor_lights
        action: light.turn_on
        data: {}
      - target:
          entity_id:
          - light.front_porch_lights
          device_id:
          - fbe02d94b4a09788c1abfe4016865a79
          - 02772e117da83fd7f1571bf6e5672e9c
          - d909c213a7f2493b0c38857806ed82ff
        data:
          transition: 3
          brightness_pct: 1
        action: light.turn_on
    - sequence:
      - target:
          entity_id:
          - light.sunroom_light
          - light.diningroom_light
          - light.livingroom_light
        data:
          brightness_pct: 10
        action: light.turn_on
  mode: single
- id: exterior_led_monthly_effect
  alias: Exterior LED - Monthly Effect
  mode: single
  trigger:
  - platform: time
    at: 00:00:00
  variables:
    current_month: '{{ now().month }}'
    monthly_effects:
      1: LED-January
      2: LED-February
      3: LED-March
      4: LED-April
      5: BSMT-Patriotic
      6: BSMT-Patriotic
      7: BSMT-Patriotic
      8: LED-August
      9: LED-August
      10: Halloween
      11: LED-Thanksgiving
      12: Christmas
  condition: []
  action:
  - variables:
      target_effect: '{{ monthly_effects[current_month] }}'
  - condition: template
    value_template: '{{ target_effect in (state_attr(''light.permanent_outdoor_lights'',
      ''effect_list'') or []) }}

      '
  - service: light.turn_on
    target:
      entity_id: light.permanent_outdoor_lights
    data:
      effect: '{{ target_effect }}'
- id: interior_lights_sunrise_off
  alias: Interior Lights Off - 15 Minutes After Sunrise
  trigger:
  - platform: sun
    event: sunrise
    offset: 00:15:00
  condition: []
  action:
  - service: light.turn_off
    target:
      entity_id:
      - light.sunroom_light
      - light.livingroom_light
      - light.diningroom_light
  mode: single
- id: lights_off_except_porch_garage_attic_2330
  alias: Lights Off Except Porch/Garage/Attic @ 23:30
  description: 'At 11:30 PM, turn OFF all lights except the front porch, garage, and
    attic.

    '
  trigger:
  - platform: time
    at: '23:30:00'
  condition: []
  action:
  - variables:
      exceptions:
      - light.front_porch_lights
      - light.front_porch
      - light.garage_lights
      - light.garage
      - light.attic_light
      - light.attic
      turn_off_list: "{{ states.light\n   | rejectattr('entity_id','in', exceptions)\n
        \  | selectattr('state','eq','on')\n   | map(attribute='entity_id') | list
        }}\n"
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ turn_off_list | length > 0 }}'
      sequence:
      - service: light.turn_off
        target:
          entity_id: '{{ turn_off_list }}'
  mode: single
- id: '1755305405794'
  alias: Midnight lights
  description: ''
  triggers:
  - trigger: time
    at: 00:00:00
  conditions: []
  actions:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - light.front_porch_lights
      - light.garage_center_2
      - light.garage_left_2
      - light.garage_right_2
  - type: turn_on
    device_id: 59ce59873a8a6b7c7b48b4d311af8606
    entity_id: 8a639fe5a1dfb86cffaafdd92550355b
    domain: light
    brightness_pct: 20
  mode: single
- id: '1755305842459'
  alias: Bedroom-purifier on
  description: ''
  triggers:
  - type: turned_on
    device_id: f4d2eb3ede17ec2db2485c5f094bf6ad
    entity_id: 73dbec16d31025a64677606382fa35aa
    domain: switch
    trigger: device
  conditions: []
  actions:
  - type: turn_off
    device_id: 6e3a0d96120bc4222780d4f255f88414
    entity_id: a0ac47bc0794f26c2cce245f4e4200d3
    domain: switch
  mode: single
- id: '1755305876272'
  alias: Bedroom-purifier-off
  description: ''
  triggers:
  - type: turned_off
    device_id: f4d2eb3ede17ec2db2485c5f094bf6ad
    entity_id: 73dbec16d31025a64677606382fa35aa
    domain: switch
    trigger: device
  conditions: []
  actions:
  - type: turn_on
    device_id: 6e3a0d96120bc4222780d4f255f88414
    entity_id: a0ac47bc0794f26c2cce245f4e4200d3
    domain: switch
  mode: single
- id: '1755373002789'
  alias: Purifier on bedroom
  description: ''
  triggers:
  - type: changed_states
    device_id: f4d2eb3ede17ec2db2485c5f094bf6ad
    entity_id: 73dbec16d31025a64677606382fa35aa
    domain: switch
    trigger: device
  conditions: []
  actions:
  - type: turn_off
    device_id: 6e3a0d96120bc4222780d4f255f88414
    entity_id: a0ac47bc0794f26c2cce245f4e4200d3
    domain: switch
  mode: single
